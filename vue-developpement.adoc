# Vue d√©veloppement
:sectnumlevels: 4
:toclevels: 4
:sectnums: 4
:toc: left
:icons: font
:toc-title: Sommaire

*Derni√®re modification* : {docdate} 

*Date de la derni√®re revue globale* : _<Faire r√©guli√®rement des revues compl√®tes de la vue (au moins une fois par an tant que le projet est actif) et mentionner la date ici>_

*Statut du document* :  _<Indiquer ici le statut de la vue, par exemple 'DRAFT', 'FINALIS√â',...>_

//üè∑{"id": "84c5d434-ea70-41fc-92bc-53a40ab29025", "labels": ["contexte"]}
## Introduction

La vue d√©veloppement d√©crit le code √† produire et les m√©thodes pour l'√©crire.

Les autres vues du dossier sont accessibles link:./README.adoc[d'ici].

Le glossaire du projet est disponible link:glossaire.adoc[ici]. Nous ne reprendrons pas ici les termes fonctionnels ou techniques d√©j√† d√©finis.

//üè∑{"id": "712fc07b-76ba-4093-bbf8-cceeaa903e64", "labels": ["references"]}
### Documentation de R√©f√©rence

[TIP]
Mentionner ici les documents d'architecture de r√©f√©rence (mutualis√©s). Ce document ne doit pas reprendre leur contenu sous peine de devenir rapidement obsol√®te et immaintenable.

.R√©f√©rences documentaires d√©veloppement
[cols="1e,1e,4e,4e"]
|====
|N¬∞|Version|Titre/URL du document|D√©tail

|1|1.0|https://references.modernisation.gouv.fr/rgaa-accessibilite/#menu
|RGAA

|====

//üè∑{"id": "fa1ed85e-92d0-4aa9-9421-dcf267d0cf0e", "labels": ["contexte","incertitudes"]}
## Non statu√©

//üè∑{"id": "b3592a4d-d0df-4f87-8416-97cfb287cd08", "labels": []}
### Points n√©cessitant une √©tude compl√©mentaire

.Points n√©cessitant une √©tude compl√©mentaire
[cols="e,e,e,e,e"]
|====
|ID|D√©tail|Statut|Porteur du sujet  | √âch√©ance

|ED1
|Le choix Angular ou React.JS pour le frontend est encore soumis √† √©tude. Ceci n‚Äôimpacte pas la partie back des services REST
|EN_COURS
|Equipe m√©thodes et outils
|AVANT 2040

|====

//üè∑{"id": "fb0b1a28-1c08-4c0b-bb38-1cae99a46818", "labels": []}
### Hypoth√®ses

.Hypoth√®ses
[cols="1e,4e"]
|====
|ID|D√©tail

|HD1
|M√™me si ce point n‚Äôest pas encore totalement valid√©, l‚Äôapplication n√©cessitera un JRE 21+ pour tirer partie de librairies et frameworks Java indispensables au projet.
|====


//üè∑{"id": "84cd4aed-36c0-4564-8354-29a7de004923", "labels": ["niveau_detail::general", "contraintes"]}
## Contraintes

[TIP]
====
Lister ici les contraintes relatives √† l'architecture logicielle, ceci inclut de fa√ßon non-exhaustive :

* L'obligation d'utiliser un framework ou une fili√®re technologique pr√©cise ;
* Les budgets disponibles pour les licences ou les frais de d√©veloppement ;
* L'outillage (IDE, etc.) ;
* L'int√©gration continue ;
* Les normes et niveaux de qualit√© de code applicables ;
* Les tests (taux de couverture, r√©partition par type de test, etc.).

====
====
Exemple 1 : La couverture de code devra √™tre d'au moins 60%.
====
====
Exemple 2 : Le module devra se baser sur le framework Hibernate pour la persistance.
====
====
Exemple 3 : l'application sera construite, test√©e et d√©ploy√©e en continu √† chaque push via la plateforme Gitlab-CI.
====

//üè∑{"id": "8d79cc07-e094-4863-8bb8-0a3ca317743d", "labels": ["niveau_detail::general","exigences"]}
## Exigences non fonctionnelles

[TIP]
====
Contrairement aux contraintes qui fixent le cadre auquel toute application devait se conformer, les exigences non fonctionnelles sont donn√©es par les porteurs du projet (Product Owner/MOA en g√©n√©ral). Pr√©voir des interviews pour les d√©terminer. Si certaines exigences ne sont pas r√©alistes, le mentionner dans le r√©f√©rentiel des points √† statuer.
====

//üè∑{"id": "48bb8b97-2e97-4515-bf3b-95864f85e4e9", "labels": ["ihm"]}
### Accessibilit√©

[TIP]
====
Cette application doit-elle √™tre accessible aux non/mal voyants¬†? malentendants¬†? 

Si oui, quel niveau d‚Äôaccessibilit√©¬†? 
Se r√©f√©rer de pr√©f√©rence au R√©f√©rentiel G√©n√©ral d‚ÄôAccessibilit√© (https://references.modernisation.gouv.fr/rgaa-accessibilite/#menu[RGAA]) qui pr√©conise un niveau WCAG 2.0 AA¬†: 

Il existe d‚Äôautres normes d‚Äôaccessibilit√© (WCAG, AccessiWeb, etc.) . Attention √† correctement √©valuer le niveau vis√©¬†(ni sur-qualit√©, ni sous-qualit√©) :

* Atteindre un niveau d‚Äôaccessibilit√© tr√®s √©lev√© peut √™tre co√ªteux et contraignant technologiquement. Il demande √©galement de bonnes comp√©tences (accessibilit√©, HTML5/CSS3 en particulier) et des profils rares.
* La loi est de plus en plus stricte pour les administrations qui doivent respecter un niveau d‚Äôaccessibilit√© suffisant (loi  n¬∞2005-102 du 11 f√©vrier 2005 pour l‚Äô√©galit√© des droits et des chances, la participation et la citoyennet√© des personnes handicap√©es). ¬´¬†Tous les sites publics europ√©ens doivent atteindre le double A (AA) du W3C/WAI¬†¬ª.
====

//üè∑{"id": "b098d142-655e-4521-9d4f-2c2ea8eceb45", "labels": ["ihm"]}
### Ergonomie

//üè∑{"id": "3c031334-5598-4817-87b4-dec34ce8389b", "labels": ["niveau_detail::d√©taill√©"]}
#### Charte ergonomique

[TIP]
====
En g√©n√©ral, on se r√©f√®re ici √† la charte ergonomique de l‚Äôorganisme. Lister n√©anmoins d‚Äô√©ventuelles sp√©cificit√©s. Ne pas reprendre les contraintes d‚Äôaccessibilit√© list√©es plus haut.
====
 
//üè∑{"id": "90b4af62-df5b-485e-87c4-7dd0b21d0464", "labels": ["niveau_detail::approfondi"]}
#### Sp√©cificit√©s sur les widgets

[TIP]
====
Des comportements ergonomiques tr√®s pr√©cis peuvent impacter assez fortement l‚Äôarchitecture et imposer une librairie de composants graphiques ou une autre. Il est fortement d√©conseill√© de personnaliser des librairies existantes (co√ªt de maintenance tr√®s √©lev√©, grande complexit√©). Bien choisir sa librairie ou restreindre ses besoins.
====
====
Exemple 1¬†: les tableaux devront √™tre triables suivant plusieurs colonnes.
====
====
Exemple 2¬†: de nombreux √©crans seront pourvus d‚Äôaccord√©ons
====

//üè∑{"id": "1cacea74-bede-43b3-93a5-804fd60ff4fb", "labels": ["niveau_detail::approfondi"]}
#### Polices de caract√®re

[TIP]
====
D√©crire ici les polices de caract√®re √† utiliser pour les pages Web, les applications ou les documents compos√©s.

Le choix des polices suit des contraintes de licences. Afin d'assurer une s√©curit√© juridique au projet, attention aux polices commerciales soumises √† royalties (en particulier les polices appartenant √† Microsoft comme Times New Roman, Courier, Verdana, Arial) et qui ne permettent pas de produire gratuitement des documents sans passer par leurs √©diteurs (Word, etc.). 

Voir par exemple la police https://www.gouvernement.fr/charte/charte-graphique-les-fondamentaux/la-typographie[Marianne] pr√©conis√©e par le gouvernement en tant que police √† chasse variable.

Redhat propose quatre familles de polices https://fr.wikipedia.org/wiki/Liberation_(police_d%27%C3%A9criture)[Liberation Mono] en licence Open Source s√©curisante sur un plan juridique et compatible m√©triquement avec le Monotype, le Courrier New, l'Arial et le Times New Roman. 
====

//üè∑{"id": "cfd3435f-d888-43e3-a634-35c3d5d92cb4", "labels": ["niveau::interm√©diaire", "niveau_detail::approfondi"]}
#### Site Web adaptatif

[TIP]
====
Lister les contraintes d‚Äôaffichage multi-support. Utiliser quand c'est possible les frameworks modernes (type Angular, Vue.js ou React.js). Il existe plusieurs niveaux d‚Äôadaptation¬†des pages Web :

* Statique (largeur de page fixe).
* Dynamique (redimensionnement automatique, les tailles sont exprim√©es en %).
* Adaptatif (les distances sont exprim√©es en unit√©s dont la taille d√©pend du support).
* Responsive (le contenu et son agencement d√©pend du support).

WARNING: Un design responsive vient avec ses contraintes (duplication de code CSS, augmentation du volume du site √† t√©l√©charger par le client, complexit√©, plus de tests end-to-end √† pr√©voir, etc.). 
====

//üè∑{"id": "30cc6226-2213-4351-83aa-a4905c5d4baa", "labels": ["niveau::avanc√©", "niveau_detail::approfondi"]}
#### Progressive Web Apps (PWA)

[TIP]
====
Sp√©cifier si l'application est progressive. Les applications PWA sont des applications Web HTML5 poss√©dant tous les attributs des applications natives (mode d√©connect√©, rapide, adaptatif, accessible depuis l'OS, etc.) 
====
====
Exemple : L'application X sera totalement PWA. Des tests devront d√©monter que le site continuer √† fonctionner sans r√©seau et que les pages se chargent en moins de 5 secs en 4G. 
====

//üè∑{"id": "67ff8381-8145-4dc4-bd15-cfec867dc8b5", "labels": []}
#### Navigateurs support√©s

[TIP]
====
Pr√©ciser quels sont les navigateurs support√©s si votre projet contient une IHM Web. 

Lorsqu'on s'adresse √† un public dont on ne g√®re pas le parc de navigateurs (comme un site Web sur Internet), la meilleure option pour rendre les choses intelligibles et expliciter les enjeux est de n√©gocier avec les parties prenantes du projet un pourcentage de public support√© en se basant sur des https://gs.statcounter.com/[statistiques]. Par exemple : "Support de 95 % des navigateurs √† date d'aujourd'hui".
====

WARNING: Supporter d‚Äôanciens navigateur (IE en particulier) peut engendrer des surco√ªts r√©dhibitoires et des risques sur la s√©curit√©. Dans tous les cas, il convient d‚Äô√©valuer les surco√ªts de tester sur plusieurs plate-formes. Il existe de bons outils (payants) comme Litmus ou EmailOnAcid permettant de g√©n√©rer un rendu des sites Web et des courriels HTML sur une combinatoire d‚ÄôOS / type de lecteur (PC/tablette/mobile) /navigateur tr√®s vaste (de l‚Äôordre de 50).  Ce type de site est incontournable pour une application grand public.

====
Exemple 1¬†: L‚Äôapplication intranet X devra fonctionner sur les navigateurs qualifi√©s en interne (cf norme xyz)
====
====
Exemple 2¬†: L‚Äôapplication Y √©tant une application internet visant le public le plus large possible, y compris des terminaux de pays en voie de d√©veloppement. Il devra supporter Firefox 3+, Chrome 49+, IE 8+, Opera 6+.
====
====
Exemple 3¬†: L‚Äôapplication Z vise le public le plus large et dot√© de syst√®mes raisonnablement anciens et devra donc supporter¬†: Firefox 135+, Chrome 126+, Safari 5+, Opera 20+, Edge.
====

//üè∑{"id": "39318743-8131-4d46-9354-c64804066ae8", "labels": ["niveau::avanc√©", "niveau_detail::approfondi"]}
#### Mode d√©connect√©

[TIP]
====
Pr√©ciser si l'application doit pouvoir continuer √† fonctionner sans acc√®s √† Internet ou au LAN (courant pour les applications utilis√©es par les professionnels en d√©placement par exemple). 

Il peut s‚Äôagir de clients lourds classiques (Java, Kotlin, JS, C++, etc.) poss√©dant leur base locale pouvant √™tre synchronis√©e de retour au bureau. Il peut aussi s'agir d'applications PWA (voir plus haut) utilisant un service worker pour les resources statiques et du stockage navigateur (local storage, base de donn√©es IndexedDB).
====
====
Exemple 1 : L'application sera d√©velopp√©e en Kotlin Jetpack Compose avec stockage local bas√© sur une base H2 synchronis√©es avec la base commune par appels REST.
====
====
Exemple 2 : L'application mobile sera en mode PWA, enti√®rement √©crite en HTML5 avec local storage pour stocker les donn√©es de la journ√©e dans le navigateur.
====

//üè∑{"id": "fbe627e5-be3f-41ec-9a2a-c43bd3587c6e", "labels": []}
#### Internationalisation (i18n)

[TIP]
====
Pr√©ciser les contraintes de l‚Äô application en terme d‚Äôi18n¬†: localisation des libell√©s, direction du texte, mise en page adaptable, code couleur sp√©cifique, format de dates, devises, affichage des s√©parateurs d√©cimaux, etc.
====
====
Exemple 1¬†: L‚ÄôIHM X sera traduite en 25 langues dont certaines langues asiatiques et l‚Äôarabe.
====
====
Exemple 2¬†: les formats de dates et autres champs de saisie devront √™tre parfaitement localis√©s pour un confort maximal de l‚Äôutilisateur. 
====



//üè∑{"id": "8c3bc449-1b44-44cf-82a1-f26cdbf258af", "labels": ["ihm"]}
### Exigences de SEO

[TIP]
====
Le SEO (Search engine optimization) concerne la visibilit√© d'un site Web au travers des moteurs de recherche (comme Google Search, Bing ou Quant).
====
====
Exemple 1 :  Aucune indexation n√©cessaire ni d√©sir√©e (site interne)
====
====
Exemple 2 : Les pages statiques du site devront suivre les bonnes pratiques SEO pour optimiser sa visibilit√©.
====

//üè∑{"id": "c8e58371-6bea-48e2-ab0e-989fec63e0ee", "labels": []}
### Exigences d'√©coconception

[TIP]
====
L'√©coconception consiste √† limiter l'impact environnemental des logiciels et mat√©riels utilis√©s par l‚Äôapplication. Les exigences dans ce domaine s'expriment g√©n√©ralement en kilowattheures (KWH) ou √©quivalent CO2.

A noter que la loi fran√ßaise (voir loi https://ecoresponsable.numerique.gouv.fr/publications/guide-pratique-achats-numeriques-responsables/demarche-numerique-responsable/que-prevoit-la-loi/[du n¬∞2020-105 du 10 f√©vrier 2020, ou loi AGEC]) exige de r√©duire le gaspillage li√© au num√©rique, notamment concernant l'obsolescence logicielle (art. 27). 

Lister ici les exigences d'√©coconception portant sur les logiciels.

====
====
Exemple : Les √©missions cumul√©es du service A ne devrait pas d√©passer 100KgCO2/an.    
====

//üè∑{"id": "2c0aa24a-24b8-4272-8787-b5e5207785fb", "labels": ["niveau_detail::general","solution"]}
## Architecture cible

//üè∑{"id": "50b4ef16-e558-4604-9b17-b90e68da6337", "labels": []}
### Pile logicielle

//üè∑{"id": "16dc549a-4b87-428e-b59d-4c0af1e720db", "labels": ["niveau::avanc√©"]}
#### Fili√®re technique retenue

[TIP]
====
D√©tailler les technologies choisies parmi les technologies au catalogue de l‚Äôorganisation. S‚Äôil existe des √©carts avec le catalogue, le pr√©ciser et le justifier.
====
====
Exemple : cette application est de profil P3 : "Application Web Spring" avec utilisation exceptionnelle de la librairie JasperReport.
====
====
Exemple : Utilisation de Rust √† titre exp√©rimental au sein de l'organisation. Valid√© en commit√© architecture le ‚Ä¶
====

//üè∑{"id": "e9b08c72-a836-48ad-9255-e2977a09f290", "labels": []}
#### D√©pendances

[TIP]
====
Lister ici pour chaque module les principales librairies et frameworks utilis√©s ainsi que leur version. Ne pas lister les librairies fournies au runtime par les serveurs d'application ou les frameworks. Inutile de trop d√©tailler, donner uniquement les d√©pendances structurantes.
====
====
Exemple :

.Exemple de pile logicielle
[cols="1e,4e,1e"]
|====
|D√©pendance|R√¥le|Version 

|Framework React.js
|Framework JS de pr√©sentation
|19

|JasperReport
|√âditique transactionnelle, composition des factures au format PDF
|7.0.0
|====
====

//üè∑{"id": "ec64dc5b-cdc1-4ab3-ae41-ac3c1c3ad9e7", "labels": ["niveau::interm√©diaire"], link_to=["d6e3eb12-371b-4c26-b538-9fea2051bfed"]}
### Performances

[TIP]
====
M√™me si des campagnes de performance sont pr√©vues, l'exp√©rience montre que la plupart des probl√®mes de performance peuvent √™tre d√©tect√©s d√®s le d√©veloppement.
Il est donc important que les d√©veloppeurs profilent leur code, d√®s leur poste de travail (√† pr√©voir dans le Definition Of Done du projet). Il ne sera pas possible de d√©tecter tous les probl√®mes (scalabilit√©, concurrence, robustesse, tuning des caches, etc.) mais c'est le cas de la plupart des probl√®mes de temps de r√©ponse. Il est √©galement souvent possible de simuler de la concurrence et de la charge. Nous pr√©sentons ici quelques pistes tr√®s basiques et √† la port√©e de tout d√©veloppeur.

Cot√© Frontend :

* Limiter la complexit√© des CSS (s√©lecteurs ou fonctions en particulier) ;
* Utiliser un profiler (comme celui de Chrome ou Firefox) ;
* Privil√©gier les appels asynchrones quand c'est possible.
* ‚Ä¶

Cot√© Backend :

* S'assurer que la pagination serveur va bien jusqu'√† la base de donn√©e (en PostgreSQL, utiliser `FETCH FIRST x ROWS ONLY`.
* Ne pas mettre en place de contraintes inutiles en base de donn√©es.
* Limiter le nombre de jointures et les relations many-to-many.
* Dans des cas de grosses volum√©tries, √©tudier les solutions de partitionnement de tables.
* Ne pas oublier d'ajouter tous les index n√©cessaires, utiliser l'analyse du plan d'ex√©cution pour v√©rifier qu'il n'y a pas de full scans.
* Attention aux fonctions SQL qui 'cassent' les index (comme  `UPPER()`). Privil√©gier les traitements cot√© code backend si possible ou pr√©voir des index de fonctions correspondants.
* Activer les journaux de requ√™tes (exemple Hibernate : `org.hibernate.SQL=DEBUG`,`-Dhibernate.generate_statistics=true`) et v√©rifier les requ√™tes SQL et leur nombre (pour d√©tecter en particulier le probl√®me du https://stackoverflow.com/questions/97197/what-is-the-n1-selects-problem-in-orm-object-relational-mapping[SELECT N+1], tr√®s courant).
* Disposer m√™me sur poste de travail d'un jeu de donn√©e minimal (une centaine d'enregistrement).
* V√©rifier avec un profiler (comme JVisualVM en Java) la consommation m√©moire pour d√©tecter les fuites ou les surconsommations.
* V√©rifier qu'il n'y a pas de fuite de threads ou de deadlocks en comptant le nombre de threads actifs sur une p√©riode suffisamment longue (une nuit compl√®te par exemple).
* Stresser les API _a minima_ (avec des injecteurs comme JMeter ou K6) et via une rampe progressive.
* Traquer les IO (des milliers de fois plus lents que des acc√®s m√©moire).
* ‚Ä¶

Frontend et backend : 

* Toute ressource (taille de cha√Æne, nombre d'appel sur une dur√©e, etc.) doit syst√©matiquement √™tre born√©e par une limite (pas d'¬´ open bar ¬ª).
* V√©rifier que la taille des requ√™tes HTTP reste en dessous de quelques dizaines de Kio (hors GET sur fichiers). Utiliser la <<Tri et Pagination,pagination cliente et serveur>>.
* Traquer le bavardage r√©seau : grouper les requ√™tes quand possible (il faut trouver un compromis avec la r√®gle pr√©c√©dente). S'aider de la r√®gle ‚ÄòI‚Äô de SOLID (Interface Segregation).
* Pr√©voir des endpoints multivalu√©s (exemple: `GET /personnes?list=id1,id2,‚Ä¶`) pour r√©cup√©rer plusieurs √©l√©ments √† la fois
(doit se concr√©tiser par un seul `SELECT WHERE .. IN` dans la requ√™te finale, pas une boucle dans le code !)

====

WARNING: Ne pas tomber √† l'inverse dans l'optimisation pr√©matur√©e "source de tous les probl√®mes" selon Donald Knuth. √âcrire le code le plus simple possible et suivre un bon design, ne l'optimiser qu‚Äôensuite. 
N'optimiser que si cela vaut le co√ªt (loi de Pareto). Commencer par les optimisations les plus significatives (top 10) et ne pas perdre son temps √† grappiller des microsecondes voire nanosecondes.

//üè∑{"id": "cacf4bd8-9e8a-449c-af31-1fd27169a685", "labels": ["niveau::interm√©diaire",  "niveau_detail::d√©taill√©"]}
### Sp√©cificit√©s d‚Äôusine logicielle

[TIP]
====
Sans reprendre le fonctionnement de la plate-forme d‚ÄôInt√©gration Continue de l'organisation (CI), pr√©ciser si ce projet n√©cessite une configuration particuli√®re.
====
====
Exemple : Les jobs Jenkins produiront le logiciel sous forme de conteneurs Docker/OCI si  tous les TU sont passants. Les tests d'int√©gration seront ensuite ex√©cut√©s sur ce conteneur. Si tous les tests d‚Äôint√©gration et BDD sont passants, l'image Docker/OCI est livr√©e dans Nexus.
====

//üè∑{"id": "11f66697-ac3a-40f0-903a-cc8202b7315e", "labels": []}
### Bonnes pratiques

[TIP]
====
Lister les bonnes pratiques (blueprints) applicables. √âviter les bonnes pratiques 'maison' mais privil√©gier celles qui viennent de la communaut√© et sont donc √©prouv√©es et d√©j√† connus des d√©veloppeuses et d√©veloppeurs. Id√©alement, il ne devrait y avoir ici que les liens vers des ressources externes.
====
====
Exemple : Suivre les recommendations de https://www.restapitutorial.com/[ce tutoriel] pour la conception d'API Restful.
====

//üè∑{"id": "4cfc1f5e-bf4b-4c33-b718-83ca90974090", "labels": ["niveau_detail::d√©taill√©"]}
### Normes de d√©veloppement et qualim√©trie

[TIP] 
==== 
Rendre explicite les r√®gles et le niveau de qualit√© requis pour le code 
==== 
==== 
Exemple 1 : Les r√®gles de qualit√© √† utiliser pour le code seront https://rules.sonarsource.com/java[les r√®gles standards SonarQube pour Java]. 
==== 
==== 
Exemple 2 : Le niveau de qualit√© exig√© correspond au https://docs.sonarqube.org/6.7/QualityGates.html[Quality Gate SonarQube] recommand√© : 

* 80% de couverture minimum sur le nouveau code.
* 3 % max de lignes dupliqu√©es 
* Niveau A en Maintenabily, Relability et Security 
==== 

====
Exemple 3 : Quelle langue utilis√©e pour le code ? fran√ßais pour les termes fonctionnels (il est imp√©ratif d'utiliser les termes m√©tiers comme pr√©conis√© par le DDD) et l'anglais pour les termes techniques g√©n√©riques.
====

//üè∑{"id": "bbe62a07-d42a-4495-8d23-4d0ea23d19e6", "labels": ["level::intermediate", "project_size::large"]}
### Patterns notables

[TIP]
====
Pr√©ciser si ce projet a mis en ≈ìuvre des patterns structurants (GoF, JEE ou autres). Inutile de reprendre les patterns d√©j√† support√©s par les langages ou les serveurs d'application (par exemple, l'IoC dans un serveur JEE).
====
====
Exemple 1 : pour traiter l'explosion combinatoire des contrats possibles et √©viter de multiplier les niveaux d'h√©ritage, nous utiliserons massivement la pattern d√©corateur [GoF] dont voici un exemple d‚Äôutilisation : <sch√©ma>.
====

//üè∑{"id": "99e519d3-e8cf-4b3c-8e87-e06a1bf675af", "labels": ["level::intermediate", "project_size::large"]}
### Sp√©cificit√©s des tests 

[TIP] 
==== 
Une m√©thodologie ou une technologie particuli√®re est-elle en jeu dans ce projet ? Quelle est la strat√©gie de tests ? 
==== 
==== 
Exemple 1 : ce projet sera couvert en plus des TU et tests d‚Äôint√©gration car des tests d'acceptance BDD (Behavioral Driven Development) en technologie Spock. 
==== 
==== 
Exemple 2 : ce projet sera d√©velopp√© en TDD (test first) 
==== 
==== 

Exemple 3 : Types de tests 

.Types de tests 
[cols='2s,1,1,1,1,4a'] 
|==== 
|Type de test | Temps √† investir | Manuel ou automatis√© ? | Type de module cibl√© | Taux de Couverture vis√©e | D√©tail 

|TU 
|Tr√®s √©lev√© 
|Automatis√© 
|Backend et Frontend  
|env. 80% 
|Format BDD : sp√©cifications de comportements des classes et m√©thodes 

|Sp√©cifications ex√©cutables 
|Tr√®s √©lev√© 
|Automatis√© 
|API  
|env. 100% pour les classes du domaine 
|Mode bouchonn√©.  

|Tests de contrats 
|Faible 
|Automatis√© 
|Liens UI/API 
|env. 100% du code appelant cot√© UI et des contr√¥leurs Spring cot√© API 
|Teste la non r√©gression des √©changes lors de l'appel des op√©rations des API REST (principe CDC=Consumer-Driven Contract) via les outils Pact et pact-react-consumer. 

|Tests d'architecture 
|Tr√®s faible 
|Automatis√© 
|API et batchs 
|N/A, 100% du code est valid√© par l'outil 
|En particulier, ces tests simples √† √©crire v√©rifieront le respect des r√®gles de l'architecture hexagonale. Utilisation du framework de test ArchUnit. 

|TI (tests d'int√©gration) 
|Faible 
|Automatis√© 
|Test appelant des syst√®mes externes (bases de donn√©es, API, etc.) 
|50 √† 60% 
|Chaque TI ne doit tester qu'un seul syst√®me externe √† la fois 

|E2E (tests bout en bout) 
|Faible 
|Automatis√© 
|UI 
|30%, cas nominaux (happy path) 
|Ecrits en Playright, Cypress ou technologie similaire. Ils seront limit√©s √† un r√¥le de smoke tests (d√©tection de probl√®mes grossiers). Ces tests ne seront pas bouchonn√©s mais seront effectu√©s sur cha√Æne de liaison instanci√©e de bout en bout. Pour √©viter le travail inutile, ces tests seront faits au niveau de features enti√®res, pas forc√©ment √† chaque sprint. Ces tests feront office √©galement de tests syst√®me puisqu'ils solliciteront un maximum de modules d√©bouchonn√©s. 

|Tests de performance 
|Faible (hors campagnes de performance d√©di√©es) 
|Automatis√© 
|API critiques 
|20% 
|Possiblement automatis√©s en CI en DEV mais √©galement lanc√© manuellement par les d√©veloppeurs 

|Tests d'accessibilit√© 
|Moyenne 
|Automatis√© + manuel 
|UI 
|50%  
|Tests Axe-Core lanc√©s en CI √† compl√©ter d'un audit manuel 

|Tests de s√©curit√© 
|Moyenne 
|Manuel 
|Tous 
|Faible, uniquement sur les fonctions sensibles 
|Audit √† pr√©voir 

|Tests syst√®me 
|Faible 
|Manuels 
|UI et batchs 
|10%  
|Tests men√©s par l'√©quipe de d√©veloppement couvrant des sc√©narios fonctionnels complets. Le but  
est ici de tester le fonctionnement de l'ensemble des modules (ce qui n'est pas automatisable) et de  
d√©tecter un maximum de bugs avant les tests d'UAT. 

|Tests UAT (acceptation) 
|Moyenne 
|Manuels 
|UI, batchs lanc√© √† la main 
|de 30% √† 80% selon le nombre de sc√©narios pr√©vus  
|Tests men√©s en recette par des utilisateurs finaux sur environnement non bouchonn√© avec des cahiers de tests. Tests d'acceptance de bout n bout (on suit un cahier de tests avec les cas nominaux), Tests exploratoires (on tente toutes les combinatoires possibles avec un guidage minimal dans le cahier de test). Utilisation de l'outil Squash pour le suivi.
|==== 
==== 

NOTE: Pour un projet d'envergure, la strat√©gie de test fait en g√©n√©ral l'objet d'un document propre. Une strat√©gie standard peut √©galement √™tre d√©finie au niveau du SI. 

//üè∑{"id": "6ff8aacb-5020-4ade-a10d-3dce3898276b", "labels": ["level::intermediate", "detail_level::detailed"],"link_to": ["c8e58371-6bea-48e2-ab0e-989fec63e0ee"]}
=== √âco-conception

[TIP]
====
Lister ici les mesures logicielles permettant de r√©pondre aux exigences d'√©coconception list√©es plus haut. Les r√©ponses √† ces probl√©matiques sont souvent les m√™mes que celles aux exigences de performance (temps de r√©ponse en particulier). Dans ce cas, y faire simplement r√©f√©rence. N√©anmoins, les analyses et solutions d'√©coconception peuvent √™tre sp√©cifiques √† ce th√®me.

Un point de d√©part int√©ressant pour manipuler l'impact carbone peut √™tre la formule SCI (Software Carbone Intensity):

```
SCI = ((E * I)) + M) par R
```

Avec: 

* E (kWh) : L'√©nergie totale consomm√© par le logiciel ; 
* I (gCO2/kWh), la quantit√© de carbone √©mis par kwH ;
* M (gCO2) : l'empreinte carbone du hardware ;
* R: la quantit√© de r√©f√©rence (ex: par utilisateur, par appareil, ...)

Quelques pistes d‚Äôam√©lioration √©nerg√©tique du projet :

* Utiliser des profilers ou des outils de d√©veloppement int√©gr√©s dans les navigateurs (comme Google Dev Tools) pour analyser la consommation de ressources (nombre, dur√©e et taille des requ√™tes).
* Pour les apps, utiliser des outils de supervision de la consommation de batterie comme Battery Historian.
* Utiliser la suite d'analyse sp√©cialis√©e Greenspector.
* Mesurer la consommation √©lectrique des syst√®mes avec les sondes PowerAPI2 (d√©velopp√© par l'INRIA et l'universit√© Lille 1).
* Mesurer la taille des images et les r√©duire (sans perte) avec des outils comme pngcrush, OptiPNG, pngrewrite ou ImageMagick.
* Optimiser la consommation m√©moire et CPU des applications, tuner le GC pour une application Java.
* Faire du lazy loading pour le chargement des ressources occasionnelles.
* Limiter les r√©sultats retourn√©s de la base de donn√©es (pagination).
* Grouper les traitements de masse dans des batchs qui seront plus efficaces (lots).
====
====
Exemple 1 : le processus Vite de construction de l'application appliquera une r√©duction de taille des images via le plugin vite-imagetools.
====
====
Exemple 2 : des tests de robustesse courant sur plusieurs jours seront effectu√©s sur l‚Äôapplication mobile apr√®s chaque optimisation pour √©valuer la consommation √©nerg√©tique de l'application.
====
====
Exemple 3 : Les campagnes de performance int√©greront une analyse fine de la consommation de bande passante et en cycles CPU m√™me si les exigences en temps de r√©ponses sont couvertes, ceci pour identifier des optimisations permettant de r√©pondre aux exigences d'√©co-conception si elles ne sont pas atteintes.
====
====
Exemple 4 : Pour une exigence de 100 KgCO2/an maximum emit par le service en ligne A : on utilise 20% d'un serveur physique. On estime l'intensit√© carbone du serveur hors fonctionnement √† 1.5TCO2 sur tout son cycle de vie de 10 ans (donc 30 kgCO2/an au prorata du service A).

En utilisant la formule SCI (voir plus haut), et pour une consommation totale du serveur de 800W et 20K appels par heure en moyenne, et une √©lectricit√© fran√ßaise d'intensit√© carbone de 63g/KWH, on ne doit pas d√©passer E=1111 KWH/an, soit 6.34 mWH/appel.

====

//üè∑{"id": "bb5d8145-8519-4516-98a9-fc089f758d9c", "labels": ["level::intermediate", "detail_level::detailed"]}
### Gestion de la robustesse

//üè∑{"id": "a7bacacc-de70-48e5-8563-6a0b6d7b31a2", "labels": ["level::advanced"]}
#### Gestion des transactions

[TIP]
====
Lister ici les d√©cisions prises concernant la gestion des transactions. Ceci est surtout utile pour un syst√®me distribu√©. Quelques exemples de probl√©matiques : 

* Autorise-t-on les mises jours sur de multiples modules lors d'une m√™me requ√™te ? 
* Si oui, assurons nous le caract√®re ACID du tout (via le mode XA par exemple) ? 
* Quel moteur transactionnel utilisons nous ? 
* Quel niveau d'isolation transactionnelle (read commited, uncommited, repeatable read, serializable) ?
* Si aucun moniteur transactionnel n'est utilis√© (appel de plusieurs services REST en mise √† jour par exemple), pr√©voit-t-on des transactions compensatoires en cas d'√©chec de l'une des mises √† jours ? un pattern https://learn.microsoft.com/en-us/azure/architecture/patterns/saga[SAGA] ? des jobs de resynchronisation ? ...

====
====
Exemple : nos ressources n'√©tant pas transactionnelles (services REST), et voulant √©viter de faire des transactions compensatoires, il est interdit d'appeler deux services en mise √† jour de fa√ßon synchrone. Au besoin, nous utiliserons une file de messages pour effectuer des mises √† jour au fil de l'eau.
====

//üè∑{"id": "8bd70b17-0223-4aaf-97ac-a7284efe721f", "labels": ["level::intermediate", "detail_level::in-depth"]}
#### Gestion des sessions

[TIP]
====
Comment g√®re-t-on les sessions HTTP permettant de fournir un contexte d'ex√©cution √† un utilisateur (exemple: son panier d'achat) ? 

Notez que ceci est une surtout un probl√®me pour les applications Web classiques dont la pr√©sentation est g√©n√©r√©e sur le serveur, pas pour les applications SPA (Single Page Application) qui g√®rent toute la pr√©sentation et leur √©tat en local dans le navigateur.

Les choix faits ici affecteront les link:vue-infrastructure.adoc[choix d'infrastructure]. Par exemple, si une session est requise et que l'infrastructure est en cluster, il faudra soit mettre en place de l'affinit√© de session sur les serveurs pour forcer chaque utilisateur √† toujours arriver sur le m√™me serveur disposant de ses donn√©es, soit de mettre en place un cache distribu√© permettant aux serveurs de partager les sessions de tous les utilisateurs (plus complexe et plus lourd).

Exemples de points √† traiter :

* Quelles donn√©es doivent √™tre conserv√©es en session  ? (attention √† la volum√©trie, surtout si cache distribu√©)
* Le code doit-il √™tre thread-safe (si le m√™me utilisateur ouvre un autre onglet dans son navigateur par exemple) ?

====
====
Exemple : notre application JSF stockera en session HTTP uniquement son panier d'achat, pas les r√©f√©rences produits
====

//üè∑{"id": "4ffcfd1b-87c9-48d0-96d6-f3b3b817a869", "labels": []}
#### Gestion des erreurs

[TIP]
====
Comment g√®re-t-on les erreurs ? Exemples de points √† traiter :

* Diff√©rencions-nous erreurs fonctionnelles (erreurs fonctionnelles pr√©vues) et techniques ? Pr√©voir un diagramme de classe.
* Comment logue t-on les erreurs ? quel niveau de log ? 
* O√π sont attrap√©es les exceptions ? au plus t√¥t ou en d√©but d'appel de fa√ßon centralis√©e ?
* Utilise-t-on les exceptions standards du langage (ex: `IOException`, etc.) ou notre propre jeu d'exceptions ?
* La liste des erreurs est-elle consolid√©e ? document√©e ? 
* Affecte-t-on des codes erreur ?
* Affiche-on les stack-traces compl√®tes ? si oui, cot√© serveur et cot√© client ?
* G√®re-t-on les rejeux ? si oui, espace-t-on les rejeux ? de fa√ßon al√©atoire (jitter) ? exponentielle (exponential backoff) ?
* Comment g√®re-t-on les timeouts ?
* Comment g√©rons-nous les rejets fonctionnels? (c.-√†-d. que faire des demandes partielles ou erron√©es?) 

====
====
Exemple : les erreurs techniques (impr√©vues) comme le timeout √† un appel de service REST sont catch√©es au plus haut niveau de l'application (via un ErrorHandler). Toutes ses informations sont logu√©es avec la stack-trace compl√®te mais l'appelant ne doit recup√©rer que le code erreur g√©n√©rique XYZ sans la stack-trace (pour raison de s√©curit√©).
====

//üè∑{"id": "7a33eb60-882d-4095-bde2-9a477cc27433", "labels": ["gui"]}
#### Gestion de la robustesse cot√© frontend

[TIP]
====

Tout comme le backend, le frontend requiert une robustesse importante, d'autant plus qu'il est en prise directe avec des utilisateurs finaux. 

Entre autres :

* Penser √† interdire les doubles soumissions (double appel au backend si on double-clic sur un bouton). Ceci n'exclut pas de proc√©der √† des contr√¥les de durcissement cot√© backend.

* Afin d'√©viter des probl√®mes subtils (surtout en cas d'utilisation de stockage navigateur comme les local/session storage), penser √† emp√™cher l'ouverture d'une m√™me application Web dans plusieurs fen√™tres ou onglets du navigateur. En cas de tentative, afficher un message d'erreur dans les fen√™tres surnum√©raires.

* Toujours v√©rifier la comptabilit√© du navigateur, m√™me en environnement contr√¥l√©. En cas de tentative d'ouverture d'une page par un navigateur non support√©, afficher un message d'erreur explicite √† l'√©cran.
====

====
Exemple 1 : Si l'application est ouverte avec IE, un message d'erreur doit inviter l'utilisateur √† utiliser un navigateur support√©.
====

====
Exemple 2 : Tous les boutons de l'application devront interdire la double soumission en d√©sactivant temporairement les bouton sur √©v√©nement.
====

//üè∑{"id": "d101d1ee-8ec7-48dd-b733-ebba345c656d", "labels": ["detail_level::detailed"]}
### Gestion de la configuration

[TIP]
====
Comment configure-t-on l'application ? Exemples de points √† traiter :

* Quelles sont les variables incluses dans le package final de fa√ßon statique ?
* Quels sont les param√®tres modifiables au runtime ? 
* Mon application est-elle param√©trable via feature flags pour des raisons de canary testing par exemple ? si oui, comment je le g√®re dans le code ?
* Sous quelle forme les param√®tres sont-ils inject√©s dans l'application (variable d'environnement ? fichier .properties, base de donn√©es, etc.) ? 
* L'application accepte-elle une modification du param√©trage √† chaud ?
* D√©crire le syst√®me de configuration

====
====
Exemple (application d√©ploy√©es dans Kubernetes) : 

La configuration sera inject√©e au lancement (non modifiable √† chaud) via des variables d'environnements fournies dans le descripteur de d√©ploiement Kubernetes.
====

//üè∑{"id": "01a81b2c-1dc0-4563-a2e2-5c5248086499", "labels": ["level::advanced", "detail_level::in-depth"]}
### Politique de gestion des branches

[TIP]
====
Quels sont les workflows de branche √† pr√©voir ? git-flow ? TBD (Trunked-based Development) ? autre ?
====

====
Exemple : 

* La politique g√©n√©rale adopt√©e est la https://trunkbaseddevelopment.com/[TBD] (Trunk-Based Development)
* La branche principale est `develop`. Il s'agit d'une branche prot√©g√©e vers laquelle il n'est pas possible pousser de commits.
* Tout commit devra faire l'objet d'une Merge Request avant int√©gration dans `develop`. Les crit√®res de qualit√© (√©valu√©s de fa√ßon automatique lors de l'int√©gration continue) devront √™tre atteints pour que le commit soit int√©gr√©.
* Chaque fonctionnalit√©, refactoring significatif ou bugfix sera donc r√©alis√© sur une branche topic d√©di√©e.
* Une branche de maintenance sera tir√©e sur chaque tag de version x.y. Seuls les bugfixs seront merg√©s dans les branches de maintenance depuis `develop` via des `cherry-pick`.
====

//üè∑{"id": "35b97569-e671-40c3-809c-ffcb5d1af383", "labels": ["detail_level::detailed"]}
### Versioning

[TIP]
====
Que versionne-t-on et quel syst√®me de version utilise-t-on ?
====

====
Exemple: 

* D'une fa√ßon g√©n√©rale, toute ressource non d√©riv√©e (source, outil, script de ci-cd, template, DDL de base de donn√©es, etc.) doit √™tre versionn√©e.
* Les modules seront versionn√©s suivant la num√©rotation `x.y.z` (`<majeur).<√©volution>.<fix>`)
* Les librairies seront versionn√©es suivant la m√™me num√©rotation que les modules mais la valeur `x` sera incr√©ment√©e lors de toute mont√©e de version cassant la compatibilit√© ascendante (principe du Semantic Versioning).
* La version logique globale du projet sera : `<lot>.<no sprint>.<d√©ploiement>`

====

//üè∑{"id": "79682de3-09b7-46f1-8354-9371295d18a8", "labels": ["level::intermediate",  "detail_level::in-depth"]}
### Gestion de la concurrence

[TIP]
====
Comment g√®re-t-on les acc√®s concurrents ? Exemples de points √† traiter :

* Quel scope pour les objets (si utilisation d'un moteur IoC) ?
* Les objets doivent-il √™tre thread-safe ?
* Quelles m√©thodes doivent √™tre synchronis√©es ?
* Risques de race condition ? de famine ? de dead locks ?

====
====
Exemple  (Spring MVC) : Tous les controllers seront en scope singleton et ne doivent donc en aucun cas stocker d'√©tat dans leurs attributs pour √©viter des acc√®s concurrents.
====

//üè∑{"id": "856b9e7b-3305-48c3-bb99-798cf409181d", "labels": ["level::intermediate", "detail_level::detailed"]}
### Encodage 

[TIP] 
==== 
Quelles sont les r√®gles concernant l'encodage des cha√Ænes de caract√®res ? Ceci est un probl√®me r√©current dans les SI (qui n'a jamais observ√© d'accents corrompus sous forme de carr√©s ?). Ce probl√®me est pourtant relativement simple √† r√©soudre. Voir les exemples ci-dessous pour des exemples de dispositifs effectifs. 
==== 

==== 
Exemple 1 : Le seul encodage autoris√© dans tous les modules et composants d'infrastructure est l'`UTF-8`. L'utilisation des encodages `ISO-8859-1`, `CP-1252` ou de tout autre est formellement proscrit. Ceci comprend le param√©trage des serveurs d'application (Node, Tomcat, etc.), des sources, des fichiers de configuration, des bases de donn√©es et des fichiers. 

NOTE: Dans certains cas, nous n‚Äôavons pas la main sur la lecture des `.properties` (depuis un framework par exemple), il n‚Äôest alors pas possible de forcer un encodage en `UTF-8`. Il faut alors s'assurer qu'on sp√©cifie l'encodage effectif dans l'outil ou le code qui le lit.

==== 
==== 
Exemple 2 : Si un syst√®me externe impose d'envoyer ou de recevoir des cha√Ænes de caract√®res dans un encodage autre que le `UTF-8` (exemple : un service REST qui renvoi des donn√©es en `ISO-8859-1`) et qu‚Äôil n‚Äôest pas possible de modifier le contrat, il est imp√©ratif de traduire au sein d'une couche anti-corruption les cha√Ænes de caract√®res et ceci au plus t√¥t, d√®s l'appel. De plus, il ne faut jamais persister dans nos syst√®mes une donn√©e dans un encodage non `UTF-8`. 
==== 

//üè∑{"id": "5885803d-2d3d-4e19-af30-40e904e9fb6d", "labels": ["level::intermediate", "detail_level::detailed"]}
### Fuseaux horaires 

[TIP] 
==== 
Comment g√®re-t-on le stockage des dates ? Ceci, comme la gestion de l'encodage est un probl√®me r√©current (d√©calage d'un jour, bugs lors des changements d'heure d'√©t√©/hiver, etc.). Pour √©viter les probl√®mes, suivre la norme https://en.wikipedia.org/wiki/ISO_8601[ISO 8601] ("Time zones in ISO 8601 are represented as local time (with the location unspecified), as UTC, or as an offset from UTC." [Wikipedia]). 
==== 

==== 
Exemple 1 : Les heures ne seront jamais stock√©es sans fuseau horaire. En base, on utilisera des timestamps avec timezone (`timestamptz`) et en Java ou JS, des objets int√©grant le fuseau horaire de fa√ßon explicite (ex: `Instant` et pas `LocalDateTime` en java) ou des epochs. La pr√©cision sera au moins de la milliseconde. 
==== 
==== 
Exemple 2 : Les dates et date-heures seront stock√©es en base de donn√©es comme epoch millis au format entier long. Dans le cas des dates, on stockera l'epoch millis √† `12:00 UTC` (et pas `00:00`, trop proche du jour pr√©c√©dent, risque de bug). 
==== 

//üè∑{"id": "96ec879c-3ce3-4e48-a3f9-84590c281fd4", "labels": ["detail_level::detailed"]}
### Gestion des journaux

NOTE: Les aspects d'infrastructure de journaux sont d√©taill√©s dans link:./vue-infrastructure.adoc#_journaux[la vue infrastructure].

[TIP]
====
Fournir ici les r√®gles g√©n√©rales concernant les journaux (logs) : leur niveau de prolixit√© et le volume qu'ils repr√©sentent.
Penser √† l'exploitation des journaux, surtout cot√© serveur. Se demander s'il sera possible d'en tirer profit en cas d'erreur en production au milieu de Mio voire Gio d'autres journaux et de nombreux threads √©crivant en parall√®le.
====

//üè∑{"id": "cad3fb2c-5047-4025-892f-3180e74579c8", "labels": ["detail_level::in-depth"]}
#### R√®gles g√©n√©rales

====
Exemple 1 : 

* Ne pas laisser de journaux de d√©veloppement dans le code (exemple : `console.out("entr√©e dans m√©thode x")` ou `e.printStackTrace()`)
* Penser √† utiliser des cha√Ænes de caract√®re discriminantes (exemple : code erreur) pour faciliter le filtrage dans l'outil de recherche de journaux.
* Toujours fournir des identifiants d'entit√©s permettant de retrouver l'objet concern√© 
* Utiliser des identifiant de corr√©lation entre tiers (exemple : id de traitement g√©n√©r√©e cot√© client en JS, pass√©e au serveur)
* Eviter les calculs co√ªteux (exemple: beaucoup de concat√©nations) en utilisant des placeholders (La chaine de caract√®re √† loguer finale n'est effectivement construite que si le niveau de prolixit√© requis est utilis√©). Exemple Logback : 
```
log.info("Probl√®me sur le dossier {} de l'utilisateur {}",dossier.getId(), utilisateur.getId());
```
====

//üè∑{"id": "992c0bb3-83bc-4598-84ff-150a67df3324", "labels": ["detail_level::in-depth"]}
#### Niveaux et quantit√© de journaux
[TIP]
====
Expliquer quand et quoi loguer de sorte √† produire des journaux exploitables en production.
====

====
Exemple :   

.Niveaux journaux
[cols='1,3,1,1']
|====
|Niveau de gravit√© |Contexte d'utilisation | Volume indicatif | Environnement 

|DEBUG
|En environnement de d√©veloppement, il permet d'afficher les valeurs de variables, E/S de m√©thodes etc.. 
|Max quelques Mio / minute
|DEV, Recette. Interdit en PROD sauf demande expresse du projet

|INFO
|D√©but/fin d'un batch ou d'un appel, chargement d'une nouvelle propri√©t√©. Peut √™tre utilis√© sous forme condens√©e pour les appels de service (logging d'un appel et de son contexte). C'est le niveau de prolixit√© utilis√© pour la m√©trologie.
|Max 10 journaux / sec, quelques Kio / minute
|Tous

|WARN
|Tous les messages d'avertissement sur les informations fonctionnelles inattendues
|Pas de limites mais ne pas en abuser et y positionner un maximum de d√©tail de contexte
|Tous

|ERROR
|Toutes les erreurs qui n'emp√™chent pas √† l'application de fonctionner.
|Pas de limites. Positionner un maximum de d√©tail de contexte
|Tous

|FATAL
|Toutes les erreurs bloquantes pour l'application (probl√®me d'acc√®s BDD, HTTP  404 ou 500). Positionner un maximum de d√©tail de contexte. Penser √† bien logger ces erreurs sur un appender console au cas o√π l'√©criture sur FS serait impossible (disque plein). Penser que lors d'une erreur fatale, l'√©criture m√™me du log est sujette √† caution (par exemple en cas de d√©passement m√©moire).
|Pas de limites. 
|Tous
|====

====
 
//üè∑{"id": "f2e9066c-18d9-4234-b37c-27d342b1c99e", "labels": ["level::intermediate", "project_size::large", "detail_level::detailed"]} 
### Outils d'administration

[TIP]
====
L'application doit-elle fournir des services d‚Äôadministration ? Il est fortement conseill√© (c'est le facteur 12 des https://12factor.net/[Twelve factors d'Heroku]) d'int√©grer le code d'administration directement avec le code m√©tier.

Exemples de points √† traiter :

* Dois-je fournir un moyen de purger des donn√©es, journaux, caches, etc. ? 
(on appelle quelque fois ce type de service un 'traitement interne')    
* Dois-je fournir des indicateurs applicatifs de supervision ? (nombre de dossiers consult√©s, etc.) ?
* Dois-je fournir des outils de migration ?

====
====
Exemple : Le service `/interne/maj_v2` effectuera une mont√©e de version du mod√®le de donn√©e vers la V2
====

//üè∑{"id": "ef97a533-5fc7-4999-87fc-def24074746c", "labels": ["level::intermediate", "detail_level::detailed"]}
### Tri et Pagination

[TIP]
====
Il est n√©cessaire de conserver une bonne fluidit√© de r√©cup√©ration des donn√©es en lot. La pagination permet de limiter le bavardage entre les clients (IHM et batchs) et les API. D√©crire ici les dispositifs de pagination mis en oeuvre cot√© client et cot√© serveur.
====

====
Exemple 1 (Cot√© serveur) 

* Les requ√™tes en sortie de l'API sont syst√©matiquement tri√©es selon un ordre ascendant (le d√©faut) ou descendant. De plus, il sera possible de choisir le champ sur lequel se fait le tri via un autre query param.
* Afin de limiter le nombre de requ√™tes √† destination de l'API, celle-ci retourne un nombre limit√© d'√©l√©ments (ce nombre sera param√©trable suivant la taille des √©l√©ments individuels). Il s'agit du query param `range` contenant le num√©ro de la page √† r√©cup√©rer + le nombre d'√©l√©ments de la page. Chaque API proposera une valeur par d√©faut (de l'ordre d'une centaine).
====

====
Exemple 2 (Cot√© client) 

* Le tri doit s'appliquer sur l'ensemble des √©l√©ments en base, pas seulement sur les √©l√©ments de la derni√®re requ√™te retourn√©e par le serveur. 
* Les √©l√©ments retourn√©s seront affich√©s dans les tableaux par blocs (taille param√©trable d‚Äôune taille indicative de l'ordre de 20 √©l√©ments). 
====

//üè∑{"id": "4af6fb38-c84a-456f-b043-32abeb6e7798", "labels": ["level::intermediate" "detail_level::detailed"]}
### Provisioning et mises √† jour des DDL

[TIP]
====
D√©crire comment les DDL (structures de tables en base de donn√©es) et les donn√©es initiales (comme des nomenclatures) seront g√©r√©es puis mis √† jour.
====

====
Exemple : Nous utiliserons Liquibase embarqu√© dans les livrables pour cr√©er et mettre √† jour les DDL de la base. Il n'y aura donc pas de scripts SQL √† lancer, les requ√™tes n√©cessaires seront effectu√©es directement par l'application lors de son d√©marrage.
====

//üè∑{"id": "201fca5f-50af-41f9-ab97-60b2f7abddc6", "labels": ["level::intermediate",  "detail_level::detailed"], link_to=["fbe627e5-be3f-41ec-9a2a-c43bd3587c6e"]}
### Gestion de l'internationalisation
[TIP]
====
D√©crire comment vous r√©pondez aux exigences d'internationalisation exprim√©es plus haut.
====

====
Exemple : La gestion des dates, pluriels et nombres se fera via le https://icu.unicode.org/[standard ICU] et la librairie JS http://messageformat.github.io/messageformat/[messageformat]. 
====
