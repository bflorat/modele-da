# Vue s√©curit√©
:sectnumlevels: 4
:toclevels: 4
:sectnums: 4
:toc: left
:icons: font
:toc-title: Sommaire

[PRE-FILLED]
====
*Derni√®re modification* : _{docdate}_

*Date de la derni√®re revue globale* : 

*Statut du document* :  

====

TIP: Faire r√©guli√®rement des revues compl√®tes de la vue (au moins une fois par an tant que le projet est actif) et mentionner la date ici

TIP: Indiquer le statut de la vue, par exemple 'DRAFT', 'FINALIS√â',...

//üè∑{"id": "a08e807e-1e9b-4752-a5b8-372a40665c49", "labels": ["contexte"]}
## Introduction

La vue s√©curit√© d√©crit l'ensemble des dispositifs mis en ≈ìuvre pour emp√™cher l'utilisation non-autoris√©e, le mauvais usage, la modification ill√©gitime ou le d√©tournement des modules applicatifs.

Les autres vues du dossier sont accessibles link:./README.adoc[d'ici].

Le glossaire du projet est disponible link:glossaire.adoc[ici]. Nous ne reprendrons pas ici les termes fonctionnels ou techniques d√©j√† d√©finis.

[TIP]
La disponibilit√© est trait√©e dans la vue infrastructure.

//üè∑{"id": "cd8c64f1-d216-4b24-946c-175455e824a7", "labels": ["contexte","references"]}
### Documentation de R√©f√©rence

[TIP]
====
Mentionner ici les documents d'architecture de r√©f√©rence (mutualis√©s). Ce document ne doit pas reprendre leur contenu sous peine de devenir rapidement obsol√®te et non maintenable.
====

[PRE-FILLED]
====
[cols="1,1,4,4"]
|===
|N¬∞|Version|Titre/URL du document| D√©tail

|1
|
|
|
|
|===
====

//üè∑{"id": "ea245600-dbd6-4f56-a58c-8c77556643ad", "labels": ["contexte","incertitude"]}
## Non statu√©

//üè∑{"id": "a058d388-72e1-4136-8659-7a9db1c1a340", "labels": []}
### Points n√©cessitant une √©tude compl√©mentaire

=====
Exemple : 

[cols="1e,3e,1e,1e,2e"]
|===
|ID|D√©tail|Statut|Porteur du sujet | √âch√©ance

|ES1
|Il conviendra de valider que les dispositifs anti-CSRF mis en place r√©solvent √©galement les failles li√©es au couplage TLS + compression (type CRIME ou BREACH). 
|EN_COURS
|√âquipe s√©curit√©
|AVANT 2040

|===
=====

[PRE-FILLED]
====
[cols="1,3,1,1,2"]
|===
|ID|D√©tail|Statut|Porteur du sujet | √âch√©ance

| 
| 
| 
| 
| 
|===
====


//üè∑{"id": "68a4f41c-1139-4cdd-bb9e-e15667f47fd9", "labels": []}
### Hypoth√®ses

[TIP]
====
Donner ici les √©ventuelles hypoth√®ses structurantes

Exemple:

[cols="e,6e"]
|===
|ID|D√©tail

|HS1
|La solution SAML actuellement en place dans l‚Äôorganisation ne permet pas de r√©pondre aux besoins d‚Äôauthentification exprim√©s pour cette application Internet. Une solution OpenID Connect sera propos√©e. 
|===
====

[PRE-FILLED]
====
[cols="1,6"]
|===
|ID|D√©tail

| 
| 
|===
====

//üè∑{"id": "53ae9c06-1846-4dd2-ab55-f4a784c6a676", "labels": ["niveau_detail::g√©n√©ral", "contrainte"]}
## Contraintes

[TIP]
====
Lister ici les **contraintes de s√©curit√©** applicables √† l'architecture, incluant notamment :

- **Isolation des modules** au sein de zones r√©seaux s√©curis√©es (_DMZ, pare-feux, reverse proxy, segmentation r√©seau, etc._).
- **Normes et politiques applicables** (_ex. : politiques de mots de passe, exigences de chiffrement, MFA, conformit√© aux standards de s√©curit√©_).
- **Contraintes l√©gales et r√©glementaires** (_ex. : conformit√© RGPD, exigences sectorielles sp√©cifiques_).
- **Restrictions d'acc√®s** entre les diff√©rentes zones et syst√®mes.

====
====
Exemple 1 : La politique de gestion des mots de passe devra se conformer √† la norme `XYZ`, incluant une complexit√© minimale et un renouvellement p√©riodique.
====
====
Exemple 2 : Il est formellement interdit √† un module de la **zone Internet** d'acc√©der directement √† la **zone Intranet**.
====
====
Exemple 3 : En application du **RGPD**, les donn√©es utilisateur devront √™tre chiffr√©es **au repos et en transit** avec **AES-256 et TLS 1.3**.
====

//üè∑{"id": "4882e5b9-c250-4079-8b24-04996016606d", "labels": ["niveau_detail::g√©n√©ral", "exigence"]}
## Exigences

[TIP]
====
Pr√©senter ici les **exigences**, *pas les dispositifs y r√©pondant*. Ceux-ci seront d√©taill√©s au chapitre 3.

Pour les projets particuli√®rement sensibles, pr√©voir un **dossier d‚Äôanalyse de risque**. Pour cela, utiliser par exemple la m√©thode https://www.ssi.gouv.fr/guide/la-methode-ebios-risk-manager-le-guide/[EBIOS Risk Manager] (_Expression des Besoins et Identification des Objectifs de S√©curit√©_).
====

//üè∑{"id": "323d4c77-810a-4015-bc1a-11da07e24f3b", "labels": []}
### Exigences d'int√©grit√©

[TIP]
====
L‚Äôint√©grit√© concerne la **justesse, la durabilit√© et le niveau de confiance** des donn√©es de l‚Äôapplication.

Garantir l‚Äôint√©grit√© des donn√©es signifie s‚Äôassurer qu‚Äôelles **ne peuvent √™tre alt√©r√©es ou supprim√©es** de mani√®re involontaire (_ex. : crash disque, corruption logicielle, bug applicatif_) ou volontaire (_ex. : attaque "man-in-the-middle", √©l√©vation de privil√®ges, sabotage interne_).

‚ö† **Ne pas multiplier inutilement les classes de donn√©es**. Une unique classification pour toute l‚Äôapplication est souvent suffisante.

Exemple : 

[cols='2e,1e,1e,1e,1e']
|===
|Classe de donn√©es |Non int√®gre [small]#(Les erreurs d'int√©grit√© sont tol√©r√©es)# |D√©tectable [small]#(Les erreurs sont identifi√©es rapidement)# |Ma√Ætris√© [small]#(Les erreurs sont corrig√©es)# |Int√®gre [small]#(Aucune alt√©ration n‚Äôest tol√©r√©e)#

|**Donn√©es de la base m√©tier** | | | | X
|**Donn√©es archiv√©es** | | X | |
|**Donn√©es statistiques agr√©g√©es** | | | X |
|**Silo NoSQL des donn√©es Big Data (avant consolidation)** | X | | |
|**Code source de l‚Äôapplication** | | | | X
|**Documents officiels g√©n√©r√©s (ex. : avis d‚Äôimposition PDF)** | | | | X
|===

Exemples de dispositifs associ√©s selon le niveau d‚Äôint√©grit√© requis :

- **D√©tectable** ‚Üí Logs d‚Äôacc√®s et v√©rification des empreintes num√©riques (hashes).
- **Ma√Ætris√©** ‚Üí R√©tention des versions, auditabilit√©, correction automatique des erreurs d√©tect√©es.
- **Int√®gre** ‚Üí Chiffrement, signatures num√©riques, r√©plication synchrone, stockage immuable (WORM).
====

[PRE-FILLED]
====
[cols='2,1,1,1,1']
|===
|Classe de donn√©es |Non int√®gre [small]#(Les erreurs d'int√©grit√© sont tol√©r√©es)# |D√©tectable [small]#(Les erreurs sont identifi√©es rapidement)# |Ma√Ætris√© [small]#(Les erreurs sont corrig√©es)# |Int√®gre [small]#(Aucune alt√©ration n‚Äôest tol√©r√©e)#

| 
| 
| 
| 
| 

|===
====


//üè∑{"id": "acfa846e-0ed7-4f41-a593-f4ee29e94efd", "labels": []}
### Exigences de confidentialit√©

[TIP]
====
La confidentialit√© est la garantie que l‚Äôinformation **n‚Äôest accessible qu‚Äôaux personnes autoris√©es** (d√©finition ISO 27018).

**Bonnes pratiques** :  

- Ne pas multiplier inutilement les classes de donn√©es. Une seule classification peut suffire pour l‚Äôensemble de l‚Äôapplication.
- S‚Äôassurer que les niveaux de confidentialit√© sont **coh√©rents avec les exigences l√©gales et contractuelles**.

Exemple : 

[cols="e,e,e,e,e"]
|===
|Classe de donn√©es |Public [small]#(Donn√©e accessible √† tous sans restriction)# |Limit√© [small]#(Accessible uniquement aux personnes habilit√©es)# |R√©serv√© [small]#(Restreint au personnel interne autoris√©)# |Priv√© [small]#(Acc√®s strictement individuel)#

|**Contenu √©ditorial**  
| X | | | 

|**Donn√©es de profil utilisateur**  
| | X | | 

|**Historique du compte**  
| | | X | 

|**Logs techniques des activit√©s**  
| | | X | 

|**Donn√©es RH (ex. : aides sociales aux employ√©s)**  
| | | | X
|===

**Exemples d‚Äôapplications des niveaux de confidentialit√©** :

- **Public** ‚Üí Pages web accessibles sans connexion.
- **Limit√©** ‚Üí Informations r√©serv√©es aux utilisateurs authentifi√©s (ex : tableau de bord d‚Äôun SaaS).
- **R√©serv√©** ‚Üí Donn√©es internes sensibles (ex : logs syst√®me non accessibles aux clients).
- **Priv√©** ‚Üí Donn√©es personnelles visibles uniquement par l‚Äôutilisateur concern√© (ex : fiche de paie).
====

[PRE-FILLED]
====
[cols="1,1,1,1,1"]
|===
|Classe de donn√©es |Public [small]#(Donn√©e accessible √† tous sans restriction)# |Limit√© [small]#(Accessible uniquement aux personnes habilit√©es)# |R√©serv√© [small]#(Restreint au personnel interne autoris√©)# |Priv√© [small]#(Acc√®s strictement individuel)#

| 
| 
|
|
|
|===

====

//üè∑{"id": "94c138c1-3e8b-4eaf-8926-b5b9bfa6a86b", "labels": []}
### Exigences d'identification

[TIP]
====
L‚Äôidentification permet d'**attribuer un identifiant unique** √† chaque utilisateur, afin de le diff√©rencier des autres.  

**Attention :**  L‚Äôidentification **ne garantit pas** que l‚Äôutilisateur est bien celui qu‚Äôil pr√©tend √™tre. C‚Äôest le r√¥le de l‚Äôauthentification (exemple : mot de passe, MFA‚Ä¶).

Exemple : 

[cols="1e,3e"]
|===
|Exigence |Description

|**Identifiant unique**  
| Chaque utilisateur doit avoir un identifiant **unique et non partageable**. Une adresse e-mail personnelle est un bon identifiant.

|**Validation de l'identit√©**  
| L'existence de l'identit√© d'un internaute doit √™tre v√©rifi√©e avant tout appel de service.

|**P√©rennit√© de l‚Äôidentifiant**  
| Un identifiant ne doit **jamais √™tre supprim√©, modifi√© ou r√©utilis√©**, m√™me apr√®s la suppression d‚Äôun compte utilisateur.
|===

**Bonnes pratiques** :  

- **Privil√©gier des identifiants stables et uniques** (e-mail, num√©ro de client, UUID‚Ä¶).
- **√âviter les identifiants r√©attribuables** (exemple : ID num√©rique incr√©mental risquant d‚Äô√™tre r√©utilis√© apr√®s suppression d‚Äôun compte).
- **S'assurer que l'identifiant est coh√©rent dans tous les syst√®mes** o√π il est utilis√©.
====

[PRE-FILLED]
====
[cols="1,3"]
|===
|Exigence |Description

|
| 

|===
====


//üè∑{"id": "9d0646cd-3e3f-4878-96de-f215c9f20bdc", "labels": []}
### Exigences d'authentification

[TIP]
====
L‚Äôauthentification v√©rifie qu‚Äôun utilisateur est bien celui qu‚Äôil pr√©tend √™tre, en validant son identit√© √† l‚Äôaide d‚Äôun ou plusieurs facteurs de preuve.

‚ö† **√Ä ne pas confondre avec l‚Äôidentification**, qui ne fait que distinguer un utilisateur d‚Äôun autre sans valider son identit√©.

**Cas particuliers :** 

- Les **comptes techniques** (ex: batchs, applications, API) n√©cessitent √©galement une authentification (ex: comptes de service avec certificats ou cl√©s SSH).
- Les **comptes √† privil√®ges** (ex: `root` sur les serveurs, compte administrateur applicatif...). Ils peuvent √™tre humains ou techniques mais peuvent lire/√©crire/supprimer beaucoup de donn√©es ou r√©aliser des op√©rations irr√©versibles (blast radius large).
- L‚Äô**authentification initiale** (lors de l'inscription) est souvent plus stricte que les authentifications ult√©rieures.
- Une **authentification f√©d√©r√©e** permet de d√©l√©guer l‚Äôauthentification √† un fournisseur d‚Äôidentit√© (SSO, OAuth2, SAML, etc.), voir la section suivante.

**Cat√©gories de Facteurs d'Authentification**
[cols="1,3"]
|===
| Cat√©gorie | Description

| Connaissance
| Quelque chose que l'utilisateur **conna√Æt** (ex. : mot de passe, PIN).

| Possession
| Quelque chose que l'utilisateur **poss√®de** (ex. : token, cl√© SSH, t√©l√©phone).

| Inh√©rence
| Quelque chose que l'utilisateur **est** (ex. : biom√©trie).

| Localisation
| Quelque chose li√© √† l'**emplacement** de l'utilisateur (ex. : IP, GPS).

| Comportement
| Quelque chose li√© au **comportement** de l'utilisateur (ex. : rythme de frappe).
|===

**Facteurs d'Authentification : Tableau Comparatif**
[cols="1,1,1,2,2,1,1"]
|===
| Facteur d'authentification       | Cat√©gorie       | Force | Description                                                                 | Faiblesses / Risques                                      | Cas d'usage recommand√©                     | Norme associ√©e

| Mot de passe                     | Connaissance   | Moyenne | Cha√Æne de caract√®res secr√®te connue de l'utilisateur.         | Vuln√©rable aux attaques par brute force, phishing, r√©utilisation. | Authentification de base (comptes personnels). | NIST SP 800-63B

| Phrase de passe                  | Connaissance   | Forte   | S√©rie de mots faciles √† retenir (ex: CorrectHorseBatteryStaple). | Moins vuln√©rable au brute force, mais n√©cessite une bonne m√©morisation. | Comptes sensibles (banques, emails). | NIST SP 800-63B

| Cl√© publique SSH                 | Possession      | Forte   | Paire de cl√©s asym√©triques (publique/priv√©e) pour l'authentification. | Perte/vol de la cl√© priv√©e = acc√®s compromis. Gestion complexe. | Acc√®s aux serveurs (SSH, Git). | RFC 4251

| OTP par Token                    | Possession      | Forte   | Code √† usage unique g√©n√©r√© par un appareil physique (ex: RSA SecurID). | D√©pendance mat√©rielle (perte/vol). Co√ªt. | Connexions sensibles (admin, VPN). | RFC 6238

| OTP par application (TOTP)       | Possession      | Forte   | Code temporaire g√©n√©r√© par une app (Google Authenticator, Authy). | D√©pend de l'appareil mobile. Risque si t√©l√©phone perdu. | Comptes en ligne (Google, AWS, banques). | RFC 6238

| Cl√© mat√©rielle (YubiKey)         | Possession      | Tr√®s forte | Cl√© physique (USB/NFC) pour une authentification forte (FIDO2). | Co√ªt (~50‚Ç¨). N√©cessite un appareil compatible. | Acc√®s admin, comptes sensibles, crypto-monnaies. | FIDO2

| Certificat num√©rique              | Possession      | Tr√®s forte | Certificat X.509 stock√© sur une carte √† puce ou un appareil. | Complexit√© de gestion (PKI). Co√ªt. | Acc√®s aux r√©seaux d'entreprise, VPN. | RFC 5280

| Biom√©trie                        | Inh√©rence       | Forte   | Empreinte digitale, reconnaissance faciale/voix/iris. | Faux positifs/n√©gatifs. Probl√®mes de vie priv√©e. | D√©verrouillage d'appareils mobiles, acc√®s physiques. | ISO/IEC 30107

| Reconnaissance comportementale    | Inh√©rence       | Moyenne | Analyse du rythme de frappe ou des mouvements de souris. | Peu fiable seul. N√©cessite un apprentissage. | D√©tection de fraude (banques), acc√®s internes. | ISO/IEC 24741

| Connaissance de donn√©es m√©tier   | Connaissance   | Moyenne | Question bas√©e sur des connaissances internes (ex: "Quel √©tait le CA 2023 ?"). | Difficile √† m√©moriser. Peut √™tre partag√©. | Acc√®s interne (RH, finance). | (Interne)

| E-mail avec lien de v√©rification | Possession      | Faible  | Lien envoy√© par email pour v√©rifier l'identit√©. | Vuln√©rable au phishing et aux interceptations. | R√©initialisation de mot de passe. | (Aucune norme sp√©cifique)

| Notification push                 | Possession      | Forte   | Notification envoy√©e √† un appareil de confiance (ex: Duo Security, Okta Verify). | D√©pend de la connexion r√©seau/mobile. | Applications mobiles (banques, r√©seaux sociaux). | (Propri√©taire)

| Question secr√®te                   | Connaissance   | Faible  | Question personnelle (ex: "Nom de votre premier animal ?"). | Vuln√©rable aux devinettes et aux fuites. | R√©initialisation de compte. | (D√©conseill√© par NIST)

| Code PIN                          | Connaissance   | Faible  | Code num√©rique court (4-6 chiffres). | Limit√© et vuln√©rable au brute force. | D√©verrouillage d'appareils (t√©l√©phone, carte bancaire). | PCI DSS

| G√©olocalisation                   | Localisation    | Moyenne | V√©rification de l'emplacement via IP/GPS. | Peut √™tre contourn√©e par VPN/proxy. | Acc√®s √† distance (VPN), restrictions g√©ographiques. | (Aucune norme sp√©cifique)

| Authentification par r√©seau      | Localisation    | Moyenne | Restriction aux IP/r√©seaux autoris√©s. | Restrictif (ex: seulement depuis le bureau). | Acc√®s interne aux entreprises. | ISO/IEC 27001

| Authentification par appareil    | Possession      | Forte   | Appareil enregistr√© (ex: t√©l√©phone ou ordinateur de confiance). | D√©pend de la possession de l'appareil. | Comptes Apple/Google, appareils mobiles. | (Propri√©taire)

| Authentification continue        | Comportement    | Forte   | V√©rification p√©riodique (ex: biom√©trie toutes les 4h). | Complexit√© de mise en ≈ìuvre. | Environnements hautement s√©curis√©s (banques, gouvernement). | NIST SP 800-63B
|===

**Recommandations par Cas d'Usage : **

**Acc√®s Basique** (ex. : Site Web Public)
[cols="1,2"]
|===
| Facteur | Exemple

| Mot de passe
| `Tr0pF0rt!2024` (12+ caract√®res).

| OTP par email
| Lien de v√©rification envoy√© par email.
|===

**Acc√®s Sensible** (ex. : Compte Bancaire)
[cols="1,2"]
|===
| Facteur | Exemple

| Mot de passe
| Phrase de passe longue (`CorrectHorseBatteryStaple`).

| OTP par application (TOTP)
| Google Authenticator ou Authy.

| Biom√©trie
| Empreinte digitale ou reconnaissance faciale.
|===

**Acc√®s Administrateur** (ex. : Serveur Cloud)
[cols="1,2"]
|===
| Facteur | Exemple

| Cl√© SSH + mot de passe
| Cl√© RSA 4096 bits + phrase de passe.

| OTP par token physique (YubiKey)
| YubiKey OTP ou FIDO2.

| G√©olocalisation
| Restriction aux IP de l'entreprise.
|===

**Acc√®s Interne** (ex. : Donn√©es RH)
[cols="1,2"]
|===
| Facteur | Exemple

| Certificat num√©rique
| Smart card ou certificat X.509.

| Connaissance de donn√©es m√©tier
| "Quel √©tait le chiffre d'affaires 2023 ?"

| Notification push
| Duo Security ou Microsoft Authenticator.
|===

**Acc√®s √† Distance** (ex. : VPN)
[cols="1,2"]
|===
| Facteur | Exemple

| OTP par application (TOTP)
| Authy ou FreeOTP.

| G√©olocalisation
| Restriction aux pays autoris√©s.

| Cl√© mat√©rielle (YubiKey)
| YubiKey + PIN.
|===

Le tableau ci-dessous indique les **facteurs d‚Äôauthentification requis** selon le contexte d‚Äôutilisation (exemple) :  

[cols="e,e,e,e,e,e,e"]
|===
|Cas d'utilisation  |Mot de passe respectant la politique de s√©curit√©  |Cl√© publique SSH connue  |OTP par Token  |Biom√©trie  |Connaissance de donn√©es m√©tier  |E-mail avec lien de v√©rification  

|Utilisateur d√©j√† inscrit  
|X|||||  

|Cr√©ation d‚Äôun compte  
|||||XX|X  

|Modification du mot de passe  
|X|||||X  

|Acc√®s aux journaux s√©curis√©s  
||X||||  

|Ajout d‚Äôun b√©n√©ficiaire de virement  
|X||X|||  

|Connexion √† l‚Äôapplication mobile Y  
||||X|||  
|===

**Bonnes pratiques** :  

* **MFA (Multi-Factor Authentication)** ‚Üí √©viter l‚Äôauthentification uniquement par mot de passe.  
  Exiger **au minimum un second facteur** (OTP, cl√© FIDO2, biom√©trie, etc.).

* **Utiliser des standards √©prouv√©s** ‚Üí privil√©gier des protocoles reconnus tels que  
  **FIDO2**, **WebAuthn**, **TOTP**, **SAML 2.0**, **OpenID Connect**.

* **S√©curiser les comptes de service** ‚Üí √©viter les **mots de passe statiques**.  
  Pr√©f√©rer les **cl√©s SSH**, **certificats client** ou **tokens JWT** √† **dur√©e de vie limit√©e**.

* **Pr√©voir la r√©vocation et le renouvellement** ‚Üí mettre en place des m√©canismes pour  
  **r√©voquer et r√©g√©n√©rer rapidement** un facteur d‚Äôauthentification perdu, vol√© ou compromis.

* **Limiter les tentatives d‚Äôauthentification** ‚Üí bloquer temporairement le compte ou le sujet  
  lorsque le **seuil maximal d‚Äô√©checs** est atteint, et **ajouter un d√©lai croissant** entre les tentatives  
  pour limiter les attaques par **brute force**.

* **Mettre en place une rotation r√©guli√®re des secrets** ‚Üí renouveler p√©riodiquement les cl√©s, certificats  
  et tokens afin de r√©duire l‚Äôimpact potentiel d‚Äôune compromission.

* **Utiliser une politique de mot de passe moderne** ‚Üí  privil√©gier des phrases longues et faciles √† retenir (plut√¥t que complexes), sans rotation forc√©e, sans caract√®res sp√©ciaux forc√©s, v√©rifi√©es contre les mots de passe compromis (haveibeenpwned), avec copier/coller possibles (pour facilit√© l'utilisation de gestionnaires de mot de passe) et compl√©t√©es par une authentification multifacteur (MFA). R√©f√©rence: ANSSI, NIST SP 800-63B.

====

[PRE-FILLED]
====
[cols="1,1,1,1"]
|===
|Cas d'utilisation  | Facteur 1 | Facteur 2 | ...

| 
| 
| 
| 
|===

====

//üè∑{"id": "f552f1e6-9aea-4866-8da1-e7ed676fd228", "labels": ["niveau::avanc√©", "niveau::avanc√©", "niveau_detail::d√©taill√©"]}
### Exigences de f√©d√©ration d‚Äôidentit√©

[TIP]
====
La f√©d√©ration d‚Äôidentit√© permet √† un utilisateur de **r√©utiliser son identit√©** (credentials) g√©r√©e par un **Identity Provider (IdP)** pour s‚Äôauthentifier sur plusieurs syst√®mes ind√©pendants.

Contrairement au **SSO (Single Sign-On)**, qui assure une connexion automatique sans nouvelle saisie des identifiants, la f√©d√©ration **ne dispense pas** de l‚Äôauthentification mais centralise la gestion des identit√©s.

**Exemples courants :**  

- **France Connect** ‚Üí Bas√© sur OpenID Connect, permet aux citoyens de se connecter aux services administratifs (DGFiP, CNAM‚Ä¶) avec un compte unique.  
- **"Se connecter avec [Google | Facebook | GitHub]‚Äù** ‚Üí Impl√©ment√© via **OpenID Connect** ou **OAuth2**, permettant d‚Äôutiliser un compte tiers pour l‚Äôauthentification sur une autre plateforme.

**Avantages de la f√©d√©ration d‚Äôidentit√© :**  

- **Simplifie la gestion des comptes** ‚Üí Moins d‚Äôidentifiants √† m√©moriser pour l‚Äôutilisateur.  
- **R√©duit les co√ªts de maintenance** ‚Üí Moins de r√©initialisations de mot de passe et de gestion des utilisateurs.  
- **Am√©liore la s√©curit√©** ‚Üí Centralisation de l‚Äôauthentification aupr√®s d‚Äôun IdP de confiance, possibilit√© d‚Äôint√©grer une authentification multi-facteurs (MFA).  
====

====
**Exemple d‚Äôapplication**

L‚Äôidentification et l‚Äôauthentification des utilisateurs seront externalis√©es √† **Auth0**, un fournisseur d‚Äôidentit√© (IdP) supportant **OIDC, SAML et OAuth2**.  

**Objectifs** :  

- **Centraliser la gestion des identit√©s** et √©viter la duplication des comptes utilisateurs.  
- **R√©duire les co√ªts** de d√©veloppement et d‚Äôexploitation li√©s √† l‚Äôauthentification.  
- **Am√©liorer la s√©curit√©** en d√©l√©guant l‚Äôauthentification √† un IdP conforme aux normes de s√©curit√©.
====

//üè∑{"id": "400376ad-cc62-4ab3-8e96-5a9f9a954e49", "labels": ["niveau::avanc√©", "niveau::avanc√©"]}
### Exigences de SSO et SLO

[TIP]
====
Le **Single Sign-On (SSO)** permet √† un utilisateur de s‚Äôauthentifier une seule fois et d‚Äôacc√©der √† plusieurs applications sans ressaisir ses identifiants.  
Le **Single Log-Out (SLO)** assure qu‚Äôune d√©connexion depuis une application entra√Æne automatiquement la d√©connexion de toutes les autres applications du m√™me domaine de confiance.

**Points d‚Äôattention :**

- **Le SSO peut √™tre complexe** √† mettre en ≈ìuvre, surtout si l‚Äôinfrastructure IdP (Identity Provider) n‚Äôest pas encore en place.
- **Les applications doivent √™tre compatibles** avec le protocole choisi (SAML, OIDC, Kerberos‚Ä¶).
- **Le besoin m√©tier doit √™tre justifi√©** ‚Üí Une application rarement utilis√©e ne n√©cessite pas forc√©ment de SSO.
- **Risque s√©curit√©** ‚Üí Une **authentification faible** sur une application SSO met en p√©ril tout le SI (ex. : un mot de passe faible compromet toutes les applications accessibles via SSO).

**Bonnes pratiques :**

- D√©finir des **p√©rim√®tres de confiance** limit√©s (ex. : SSO pour les applications internes uniquement).  
- Utiliser une **authentification forte** pour r√©duire les risques d‚Äôusurpation.  
- G√©rer correctement les **sessions et expirations de jetons**.  
- Envisager **une authentification centralis√©e simple (LDAP, CAS)** si le SSO n‚Äôest pas justifi√©.  
====

====
**Exemple 1 : Pas de besoin de SSO**  
Le portail applicatif repose sur un framework JSR352 qui g√®re d√©j√† l‚Äôauthentification unique. Aucun besoin de SSO suppl√©mentaire.
====
====
**Exemple 2 : Pas de SSO ni de SLO requis**  
L‚Äôapplication fonctionne de mani√®re autonome et ne partage pas d‚Äôauthentification avec d‚Äôautres services.
====
====
**Exemple 3 : SSO requis pour un environnement intranet**  

- Une fois authentifi√© sur l‚Äôune des applications de l‚Äôintranet, l‚Äôutilisateur ne doit **pas avoir √† se reconnecter** sur les autres applications jusqu‚Äô√† expiration de la session.  
- Une **d√©connexion (SLO)** depuis une application doit entra√Æner **la d√©connexion de toutes les autres applications** du domaine.  
- Le protocole choisi sera **OIDC avec un Identity Provider interne**.
====

//üè∑{"id": "01404b83-f96f-4649-ace0-e5611601b830", "labels": ["niveau::avanc√©"]}
### Exigences de non-r√©pudiation

[TIP]
====
La **non-r√©pudiation** garantit qu‚Äôun utilisateur ou une organisation ne peut **nier** avoir r√©alis√© une action donn√©e (signature, validation, transaction‚Ä¶).  
Elle repose g√©n√©ralement sur des m√©canismes cryptographiques, notamment la **signature √©lectronique** et l‚Äôhorodatage s√©curis√©.

La signature num√©rique est reconnue l√©galement par **le texte n¬∞2000-230 du 13 mars 2000 du code civil**, ainsi que par le **r√®glement eIDAS (UE 910/2014)** d√©finissant plusieurs niveaux de signature :  
- **Simple** : V√©rifie uniquement l‚Äôidentit√© de l‚Äô√©metteur.  
- **Avanc√©e (AES)** : Li√©e de mani√®re unique au signataire et prot√©g√©e contre toute modification.  
- **Qualifi√©e (QES)** : Conforme aux normes les plus strictes, avec certificat qualifi√© et dispositif s√©curis√©.

**Cas d‚Äôusage typiques :**  

- Signature des **contrats et engagements l√©gaux**.  
- Validation des **transactions financi√®res sensibles**.  
- Soumission de **documents officiels** (d√©clarations fiscales, actes notari√©s‚Ä¶).
====

**Besoins de non-r√©pudiation par cas d'usage**
[cols="e,e,e,e"]
|===
|Action ou document sign√©|Niveau de signature exig√©|Origine du certificat client|Origine du certificat serveur

|D√©claration d‚Äôimp√¥t sur le revenu (donn√©es X, Y et Z)
|Signature eIDAS qualifi√©e 
|PKI de l‚Äôadministration fiscale
|Autorit√© de certification Verisign

|Contrat d‚Äôembauche √©lectronique
|Signature eIDAS avanc√©e
|PKI interne de l‚Äôentreprise
|PKI externe certifi√©e eIDAS

|Validation d‚Äôun paiement √©lectronique
|Signature eIDAS avanc√©e
|Certificat bancaire du client
|PKI du fournisseur de paiement (ex. : Visa, Mastercard)
|===

//üè∑{"id": "958fcccc-60cb-4158-940f-279cd1d12c9b", "labels": []}
### Exigences d'anonymat et de respect de la vie priv√©e

[TIP]
Lister les contraintes d‚Äôanonymat et de vie priv√©e l√©gale (exig√©e par le RGPD). Voir [3].

====
Exemple 1 ¬†: Aucune consolidation de donn√©e ne pourra √™tre faite entre les donn√©es du domaine PERSONNE et du domaine SANTE.
====
====
Exemple 2 ¬†: Par soucis de confidentialit√© en cas d‚Äôintrusion informatique, certaines donn√©es des personnes seront expurg√©es avant r√©plication vers la zone publique¬†: le taux de cholest√©rol et le poids.
====
====
Exemple 3¬†: aucune donn√©e raciale, politique, syndicales, religieuse ou d‚Äôorientation sexuelle ne pourra √™tre stock√©e sous quelque forme que ce soit dans le SI.
====
====
Exemple 4¬†: Les donn√©es OpenData issues du domaine ¬´¬†logement¬†¬ª ne contiendront que des donn√©es consolid√©es de niveau commune, pas plus pr√©cise.
====
====
Exemple 5¬†: En application de la directive europ√©enne ¬´¬†paquet telecom¬†¬ª, un bandeau devra informer l‚Äôusager de la pr√©sence de cookies.
====
====
Exemple 6¬†: En application du RGPD, un consentement explicite des utilisateurs dans la conservation de leurs donn√©es personnelles de sant√© sera propos√©.
====

//üè∑{"id": "fcad5990-c241-4c88-b2c5-646602f8935a", "labels": ["niveau::interm√©diaire"]}
### Exigences sur les autorisations

[TIP]
====
Une autorisation ("droit d'acc√®s" ou "habilitation") permet de **contr√¥ler l‚Äôacc√®s** √† une fonction applicative sp√©cifique (√©galement appel√©e **droit**, **privil√®ge** ou **permission**) pour un utilisateur ou un groupe d‚Äôutilisateurs.

**Exemples de fonctions applicatives :**

- "Effectuer un virement interbancaire"
- "Consulter l‚Äôhistorique de son compte"
- "Supprimer un utilisateur"

‚ö† Il est recommand√© de **ne pas multiplier excessivement** les fonctions et les r√¥les afin d‚Äô√©viter une explosion combinatoire et des co√ªts de gestion √©lev√©s.

**Bonnes pratiques pour simplifier la gestion des autorisations :**

- **Regrouper** les utilisateurs dans des **groupes** (ex: `G_chef_service`).
- **Associer** une liste de **fonctions** √† un **r√¥le** (ex: `R_Administrateur`, `R_banquier_niv1`, `R_chef_service`).
- **Attribuer** les r√¥les aux **utilisateurs ou groupes** pour une meilleure factorisation.

**Mod√®le classique de gestion des autorisations :**  

image::diagrammes/roles.svg[Gestion classique des r√¥les]

**Pseudo-utilisateurs et r√¥les pr√©d√©finis** :
Penser √† sp√©cifier les utilisateurs g√©n√©riques tels que :

- **`@anonyme`** : utilisateurs non connect√©s.
- **`@connecte`** : utilisateurs authentifi√©s.

**D√©l√©gation d‚Äôautorisation (OAuth2, etc.) :**

Si l‚Äôapplication **d√©l√®gue ou consomme** des autorisations via un **syst√®me externe (OAuth2, OpenID Connect, etc.)**, il est n√©cessaire de pr√©ciser :

- **L‚Äôapplication est-elle fournisseur ou consommatrice d‚Äôautorisations ?**
- **Quels types d‚Äôautorisations sont concern√©es ?**
====

====
Exemple 1 : Les utilisateurs **non connect√©s** auront **acc√®s √† tous les privil√®ges en lecture seule uniquement**.
====

====
Exemple 2 : L‚Äôapplication utilisera **une gestion des autorisations matricielle** bas√©e sur une association **[r√¥les] ‚Üí [groupes ou utilisateurs]**.  
Le d√©tail des autorisations sera document√© dans les **SFD (Sp√©cifications Fonctionnelles D√©taill√©es)**.
====

**Exemple de matrice de r√¥les :**  
[cols="e,e,e,e"]
|===
| Groupe ou utilisateur | R√¥le `suppression` | R√¥le `administration` | R√¥le `consultation donn√©es de base`

| Groupe `g_usagers`
|
|
| X

| Groupe `@anonyme`
|
|
|

| Groupe `g_admin`
| X
| X
| X

| Utilisateur `xyz`
| X
|
| X
|===

//üè∑{"id": "e72e5ea5-5711-4665-8a91-76c63cbca2bc", "labels": ["niveau::interm√©diaire"]}
### Exigences de tra√ßabilit√© et d'auditabilit√©

[TIP]
====
Lister ici les besoins en **tra√ßabilit√© et auditabilit√©** pour d√©tecter et analyser :

* **Un usage abusif** des applications Back Office par des employ√©s.
* **Des intrusions informatiques** ou tentatives de compromission.
* **Des modifications de donn√©es** n√©cessitant un suivi d√©taill√©.

‚ö† **Les traces sont des donn√©es nominatives et sensibles**. Elles doivent √™tre prot√©g√©es avec des **m√©canismes de confidentialit√©** appropri√©s pour √©viter tout abus.

**Diff√©renciation des types de traces :**

- **Traces m√©tier** : elles refl√®tent des actions de gestion compl√®tes.  
  *Exemple* : `L‚Äôagent X a consult√© le dossier de Mme Y le 2024-02-23 √† 10:30`.  

- **Journaux applicatifs** : ils fournissent un niveau technique d‚Äôinformation.  
  *Exemple* : `[INFO] 2024-02-23 11:14 [Agent X] Appel du service "consulterDossier"`.

**Bonnes pratiques :**

- Pour les **donn√©es sensibles**, pr√©voir **une tra√ßabilit√© √† deux niveaux** (tracer aussi l‚Äôacc√®s aux traces) pour limiter les abus hi√©rarchiques.  
- La **tra√ßabilit√© des r√©f√©rentiels** (ex: base des personnes) doit inclure **une historisation compl√®te**.  
- Concevoir un **MCD** (Mod√®le Conceptuel de Donn√©es) permettant de conserver **chaque modification** avec sa date de modification et sa date d‚Äôeffet.  
====

====
**Exemple 1** : Pour le module X, **toute action m√©tier** (consultation et mise √† jour) devra g√©n√©rer une trace m√©tier contenant _a minima_ :

- L'identit√© de l‚Äôagent.
- La date et l'heure.
- En cas de modification : **ancienne et nouvelle valeur**.
====

====
**Exemple 2** : Toute **intrusion dans le SI** devra √™tre d√©tect√©e dans la mesure du possible et remont√©e aux √©quipes de s√©curit√©.
====

====
**Exemple 3** : Il doit √™tre possible de **reconstituer l‚Äôhistorique** complet d‚Äôun dossier patient √† **n‚Äôimporte quelle date**.
====

### Donn√©es √† conserver pour preuves
[TIP]
====
Exemple : 

[cols="e,e,e"]
|===
| Donn√©e | Objectif | Dur√©e de r√©tention

| Log complet (IP, heure GMT, d√©tail) des commandes pass√©es sur le site
| Prouver que la commande a bien √©t√© pass√©e
| 1 an 

| Date et contenu du mail de confirmation
| Prouver que le mail de confirmation a bien √©t√© envoy√© 
| 2 ans

| Contrat d‚Äôassurance sign√© et num√©ris√© en PDF
| Prouver que le contrat a bien √©t√© sign√©
| 5 ans

| Avis d‚Äôimposition primitif avec signature num√©rique
| Conserver le montant et la validation de l‚Äôimp√¥t
| 5 ans
|===

====

[PRE-FILLED]
====
[cols="1,1,1"]
|===
| Donn√©e | Objectif | Dur√©e de r√©tention

| 
| 
| 
|===
====

//üè∑{"id": "d1f16239-18f7-4a4a-875e-34a587eb88b4", "labels": ["solution"]}
## Mesures de s√©curit√©

//üè∑{"id": "e60500e8-b4a3-471c-941c-8fd8c02c4da9", "labels": [], "link_to": ["323d4c77-810a-4015-bc1a-11da07e24f3b"]}
### Int√©grit√©

[TIP]
====
Lister ici les mesures assurant le niveau d'int√©grit√© demand√©

Exemple: 

[cols="e,e,e"]
|===
| Classe de donn√©es | Niveau exig√© | Mesures

| Donn√©es de la base m√©tier
| Int√®gre
a|
* Utilisation du SGBDR **PostgreSQL** avec un niveau d‚Äôisolation transactionnelle **SERIALIZABLE**.
* Les entit√©s seront r√©f√©renc√©es uniquement par des **ID techniques** issues de s√©quences PostgreSQL.
* Activation de la **journaling WAL** pour assurer la reprise en cas de crash.
* V√©rification d'int√©grit√© p√©riodique avec `pg_checksums`.

| Donn√©es archiv√©es
| D√©tect√©
| G√©n√©ration de checksums **SHA-256** des backups et validation lors des restaurations.

| Donn√©es calcul√©es D1
| Ma√Ætris√©
| Stockage d‚Äôun checksum **SHA1**, relance automatique du calcul par batch en cas de divergence dans un d√©lai de **24h**.

| Silo NoSQL des donn√©es Big Data avant consolidation
| Non int√®gre
| Pas de mesure particuli√®re, **pas de backup**, ces donn√©es sont temporaires et recalculables.

| Sources de l'application
| Int√®gre
a|
* Utilisation du **SCM Git** avec contr√¥le d‚Äôint√©grit√© natif (hash SHA-1/SHA-256).
* V√©rification des commits avec **GPG signing**.
* Strat√©gie de merge stricte (fast-forward only).

| Avis d‚Äôimposition PDF
| Int√®gre
a|
* **Signature num√©rique** du montant net, de la date et du nom via **PKCS#7 (RSA, SHA-256)**.
* **Horodatage qualifi√©** int√©gr√© √† la signature (PAdES).
* Inclusion de la signature hexad√©cimale en **pied de page** du PDF pour v√©rification ult√©rieure.
|===

====

[PRE-FILLED]
====
[cols="1,1,1"]
|===
| Classe de donn√©es | Niveau exig√© | Mesures

| 
| 
|
|===
====

//üè∑{"id": "a64b5e5d-e4d4-4ed2-b425-19cd542fa58e", "labels": [], "link_to": ["acfa846e-0ed7-4f41-a593-f4ee29e94efd"]}
### Confidentialit√©

[TIP]
====
Lister ici les mesures assurant le niveau de confidentialit√© demand√©.

Exemple:

[cols="e,e,e"]
|===
| Classe de donn√©es | Niveau exig√© | Mesures

| Contenu √©ditorial
| Public
| √âchanges s√©curis√©s via **HTTPS** (TLS 1.2+), **pas d‚Äôauthentification requise**.

| Profil du compte du site Web
| Limit√©
a|
* L‚Äôacc√®s √† ce contenu n√©cessite une **authentification r√©ussie** par login/mot de passe.
* **Hash s√©curis√© des mots de passe** avec **Argon2id**.
* Utilisation de **JWT** pour les sessions avec expiration contr√¥l√©e.

| Historique du compte
| R√©serv√©
a|
* L‚Äôacc√®s est **r√©serv√© aux exploitants habilit√©s**.
* Consultation uniquement via **requ√™tes PL/SQL s√©curis√©es** ex√©cut√©es avec un r√¥le limit√© en base de donn√©es.
* Activation du **Data Masking** pour les informations sensibles.

| Logs des activit√©s de l‚Äôinternaute
| R√©serv√©
a|
* **Acc√®s restreint** aux exploitants habilit√©s via **SSH** et authentification forte (cl√© SSH + MFA).
* Rotation automatique des logs avec **logrotate**.
* Protection contre l‚Äôinjection de logs (`log forging`).

| Donn√©es RH aides sociales aux employ√©s
| Priv√©
a|
* **Chiffrement AES-256** en base sous forme de **BLOB**.
* D√©chiffrement **c√¥t√© client uniquement** via la librairie `forge.js` (JavaScript).
* Mot de passe compl√©mentaire **non stock√© c√¥t√© serveur**, la perte du mot de passe rend les donn√©es irr√©cup√©rables.
* Les donn√©es modifi√©es sur le client sont **chiffr√©es avant envoi** et enregistr√©es dans le BLOB via le service REST X.
|===

‚ö† **Confidentialit√© des donn√©es d√©riv√©es** :  

‚úî **Chiffrement des backups** :  

- Utilisation de **Restic, Borg, Kopia** avec **chiffrement AES-GCM** et stockage s√©curis√©.  
- **Activation de S3 Object Lock (Compliance mode)** pour bloquer toute suppression accidentelle ou malveillante.

‚úî **Chiffrement des donn√©es clientes pour les applications lourdes** :  

- **Chiffrement mat√©riel** avec **SED (Self-Encrypting Drive)**.  
- **Chiffrement logiciel de partition** avec **LUKS (dm-crypt)** ou **BitLocker**.  
- **Chiffrement au niveau fichier** avec **dm-crypt**, **encfs** ou **Cryptomator**.
====

[PRE-FILLED]
====
[cols="1,1,1"]
|===
| Classe de donn√©es | Niveau exig√© | Mesures

| 
| 
| 
|===
====

//üè∑{"id": "3779a946-fc73-455b-8bab-3d5398ce0311", "labels": [], "link_to": ["94c138c1-3e8b-4eaf-8926-b5b9bfa6a86b"]}
### Identification

[TIP]
====
D√©crire ici le mode d‚Äôidentification des utilisateurs et des syst√®mes (batchs, API, services externes).  
Pr√©ciser les attributs d‚Äôidentification et les m√©canismes garantissant l‚Äôunicit√© et la persistance des identifiants.
====

====
Exemple 1¬†: L‚Äôidentifiant des usagers sera l‚Äôattribut `uid` des DN `cn=XXX,ou=service1,dc=entreprise,dc=com` dans l‚Äôannuaire LDAP central.  
Un filtre sera √©galement appliqu√© pour restreindre l'acc√®s aux membres du groupe `ou=monapplication,dc=entreprise,dc=com`.
====
====
Exemple 2¬†: Pour √©viter la r√©utilisation des identifiants de comptes supprim√©s, une table d‚Äôhistorique `historique_uid` sera ajout√©e √† la base de donn√©es et syst√©matiquement interrog√©e avant toute cr√©ation de nouveau compte.
====
====
Exemple 3 : Les comptes de service seront identifi√©s via une cl√© API unique stock√©e dans un **Vault s√©curis√©** et soumise √† une rotation automatique tous les 6 mois.
====

//üè∑{"id": "ac587042-7060-44cf-96aa-93fddadc15f5", "labels": [], "link_to": ["9d0646cd-3e3f-4878-96de-f215c9f20bdc"]}
### Authentification

[TIP]
====
D√©crire ici les m√©canismes d‚Äôauthentification mis en place, y compris :  
- Le mode de stockage et de v√©rification des mots de passe.  
- Les √©ventuels facteurs d‚Äôauthentification suppl√©mentaires.  
- La gestion du cycle de vie des identifiants (cr√©ation, mise √† jour, suppression).  
====

**Authentification par mot de passe :**

====
Exemple 1¬†: L‚Äôauthentification des internautes inscrits se fera par **login/mot de passe**, en respectant la politique de mot de passe `P`.  
Les mots de passe seront hach√©s et stock√©s sous forme de digest **bcrypt avec un facteur de co√ªt de 12**.
====
====
Exemple 2¬†: Les administrateurs internes utiliseront un **SSO bas√© sur Kerberos** avec d√©l√©gation via un fournisseur d‚Äôidentit√© OAuth2/OpenID Connect.
====
====
Exemple 3¬†: Pour permettre la r√©cup√©ration de compte, les utilisateurs pourront r√©initialiser leur mot de passe via **un lien temporaire envoy√© par e-mail** (valable 10 minutes).
====

**Authentification forte (2FA/MFA) :**

====
Exemple 4¬†: Lors de l‚Äôajout d‚Äôun nouveau b√©n√©ficiaire de virement dans l‚Äôespace internet, l‚Äôutilisateur devra fournir :  
  - Son mot de passe habituel.  
  - Un **OTP** g√©n√©r√© via une application TOTP (Google Authenticator, FreeOTP‚Ä¶).  
====
====
Exemple 5¬†: L'acc√®s aux API REST critiques n√©cessitera une **authentification par cl√© API + JWT sign√©**.  
Les cl√©s API seront stock√©es dans un **Vault** et soumises √† une rotation automatique.
====

**S√©curisation des authentifications sensibles: **
====
Exemple 6 : Toute tentative d‚Äôauthentification √©chou√©e sera **journalis√©e et supervis√©e**.  
Apr√®s **5 √©checs successifs**, le compte sera **verrouill√© temporairement pendant 30 minutes**.
====
====
Exemple 7 : Les connexions suspectes (nouvelle adresse IP, localisation inhabituelle) n√©cessiteront une **v√©rification suppl√©mentaire via un OTP envoy√© par e-mail**.
====

//üè∑{"id": "49de0015-9e27-4f60-91ca-282feec8345d", "labels": ["niveau::avanc√©","niveau_detail::d√©taill√©"], "link_to": ["f552f1e6-9aea-4866-8da1-e7ed676fd228"]}
### F√©d√©ration d‚Äôidentit√©

[TIP]
====
Les solutions les plus courantes sont actuellement :

- **OpenID Connect (OIDC)** : protocole moderne bas√© sur OAuth2, adapt√© aux applications Web et mobiles.
- **SAML** : utilis√© principalement pour le SSO en entreprise (ADFS, Shibboleth, Okta‚Ä¶).
- **OAuth 2.0** : uniquement pour **l‚Äôautorisation**, pas l‚Äôauthentification (pseudo-authentification possible via un IdP compl√©mentaire).

Pour les applications Web, pr√©ciser les **contraintes navigateur** (gestion des cookies, SameSite policy‚Ä¶).
====

====
Exemple ¬†: L‚ÄôIHM grand public permettra une identification et authentification via **France Connect** (bas√© sur OpenID Connect).  
Les utilisateurs pourront s‚Äôidentifier en r√©utilisant leur compte **DGFiP, CNAM, etc.**  
====

//üè∑{"id": "1c4774ab-e6fc-46a4-bb89-97e318a8dd8f", "labels": ["niveau::avanc√©", "niveau::avanc√©"],"link_to:":["400376ad-cc62-4ab3-8e96-5a9f9a954e49"]}
### SSO et SLO

[TIP]
====
D√©crire ici la technologie choisie et son int√©gration dans l‚Äôarchitecture.  
Quelques solutions courantes : 

- **CAS** (Central Authentication Service)  
- **Keycloak**  
- **OpenAM**  
- **LemonLDAP::NG**  

Pr√©ciser les contraintes sp√©cifiques aux applications Web, notamment la gestion des **cookies**, du **token session**, et les implications de **SameSite / CORS**.
====

====
Exemple 1¬†: L‚ÄôIHM X int√©grera un client **CAS spring-security** pour le SSO.  
Le serveur CAS utilis√© sera **YYY** et le **realm d‚Äôauthentification** utilis√© sera bas√© sur l‚Äô**Active Directory (AD) Y**.
====
====
Exemple 2¬†: Comme toutes les applications du **portail m√©tier**, l‚ÄôIHM X devra impl√©menter le **Single Logout (SLO)** en **g√©rant les callbacks de d√©connexion** du serveur CAS.
====
====
Exemple 3¬†: Le SSO sera mis en ≈ìuvre via **Keycloak** en tant que fournisseur d‚Äôidentit√©, avec une d√©l√©gation vers l‚ÄôAD via **LDAP**.
====

//üè∑{"id": "8e35ee35-b5bc-433b-8389-f07e62a05339", "labels": ["niveau_detail::d√©taill√©"]}
### Comptes de service

[TIP]
====
Les **comptes de service** sont utilis√©s pour authentifier une application ou un batch lorsqu‚Äôils acc√®dent √† un service d‚Äôinfrastructure (base de donn√©es, API‚Ä¶).

**Bonnes pratiques :**

- **Stockage s√©curis√©** des credentials (√©viter le stockage en clair dans la configuration).
- **Rotation automatique** des secrets si possible (HashiCorp Vault, AWS Secrets Manager‚Ä¶).
- **Permissions minimales** (Principe du Moindre Privil√®ge).
====

.Comptes de service
[cols='1,2,2']
|===
|Compte | Ressource requ√©rant authentification | Mode de stockage des credentials

|`jdbc_app` | Base de donn√©es PostgreSQL et SQL Server | **Stockage comme secret Kubernetes** (mont√© en volume uniquement sur les pods concern√©s)
|`api_backend` | API REST X | **Authentification via JWT sign√© et stock√© dans un coffre-fort num√©rique s√©curis√©**
|`ci_cd_runner` | Serveur CI/CD | **Stockage en HashiCorp Vault avec rotation automatique des secrets**
|===

//üè∑{"id": "9f09dacf-d151-45af-a5f6-209823e7a401", "labels": ["niveau::avanc√©"],"link_to":["01404b83-f96f-4649-ace0-e5611601b830"]}
### Non-r√©pudiation et horodatage

====
Exemple : La d√©claration d‚Äôimp√¥t sera sign√©e par le certificat client de l‚Äôusager (*X.509*, *RSA*, *SHA-256*) qui lui a √©t√© fourni par l'organisation X.
====

[TIP]
====
L'**horodatage cryptographique** ne r√©pond pas √† un besoin isol√© mais est souvent utilis√© en **compl√©ment d'une signature √©lectronique** pour garantir la non-r√©pudiation.  
L‚Äôhorodatage permet de pr√©venir toute **alt√©ration de date** (*antidatage ou postdatage*).  
Il repose sur des **jetons d‚Äôhorodatage qualifi√©s** (*RFC 3161, eIDAS*), d√©livr√©s par un **Prestataire de Service de Confiance (TSA ‚Äì Timestamping Authority)**.

====

====
Exemple : Les signatures √©lectroniques seront **horodat√©es** avec un **jeton d‚Äôhorodatage qualifi√© eIDAS**, d√©livr√© par le **prestataire de service de confiance XYZ**.
====

//üè∑{"id": "72efb92f-13f8-48e5-aed1-b57c4eab56fc", "labels": [],"link_to":["958fcccc-60cb-4158-940f-279cd1d12c9b"]}
### Anonymat et vie priv√©e

====
Exemple 1¬†: Un **audit interne annuel** sera men√© sur :

- Le **contenu des bases de donn√©es**.
- Les **extractions de donn√©es** √† destination des partenaires externes.
====
====
Exemple 2¬†: Les donn√©es expos√©es publiquement seront **export√©es partiellement** via :  
`COPY (SELECT <colonnes_autoris√©es> FROM table) TO <fichier>`  
Les **colonnes sensibles seront exclues** de la r√©plication vers la zone publique.
====

====
Exemple 3¬†: Un **bandeau de consentement aux cookies** sera mis en place sur toutes les pages de l‚Äôapplication **Angular** via le module `angular-cookie-law`.
====

//üè∑{"id": "e6d0ad26-40b7-412e-b861-1f8e6e2299ca", "labels": ["niveau::interm√©diaire"],"link_to":["fcad5990-c241-4c88-b2c5-646602f8935a"]}
### Habilitations

====
Exemple 1¬†: La gestion des **autorisations** sera int√©gr√©e **applicativement** et stock√©e dans la **base PostgreSQL**.  
Les tables d√©di√©es aux autorisations seront d√©taill√©es dans le **dossier de sp√©cification**.
====
====
Exemple 2¬†: L‚Äôacc√®s aux **carnets d‚Äôadresses** sera contr√¥l√© via **OAuth2**.  
L‚ÄôAPI utilis√©e sera **Google OAuth2 en Java**.
====

//üè∑{"id": "3819b8cc-d9c4-4d29-9ca1-adae300a79e2", "labels": ["niveau::interm√©diaire"],"link_to":["e72e5ea5-5711-4665-8a91-76c63cbca2bc"]}
### Tra√ßabilit√© et auditabilit√©

====
Exemple 1¬†: √Ä la fin de chaque **action m√©tier**, l‚Äôapplication **ReactJS** effectuera un **appel asynchrone** √† un service REST d√©di√© √† la **tra√ßabilit√© des actions**.  
Ce service enregistrera les **traces m√©tier** dans une **base Elasticsearch** pour consultation via **Kibana**.
====
====
Exemple 2¬†: Un syst√®me de **d√©tection d'intrusion (IDS)** hybride (*r√©seau + h√¥te*), bas√© sur **Wazuh**, sera **d√©ploy√© sur l‚Äôensemble des machines** utilis√©es par l‚Äôapplication.
====
====
Exemple 3¬†: Les **tables X, Y, ‚Ä¶** seront **historis√©es** selon le mod√®le suivant : +
<diagramme de classe d√©crivant la conservation des versions de donn√©es>
====
====
Exemple 4¬†: Tous les documents **servant de preuve** seront archiv√©s dans la **GED (Gestion √âlectronique de Documents)** avec des m√©tadonn√©es permettant leur indexation et leur consultation rapide.
====
====
Exemple 5¬†: Les journaux **contenant le tag `[PREUVE]`** et issus de **tous les modules** seront :

- **Centralis√©s** via le syst√®me de logs **Elasticsearch**.
- **Transform√©s et enrichis** via **Logstash**.
- **Index√©s quotidiennement** dans l‚Äôindex **Elastic `preuves`** pour faciliter les recherches et la conformit√©.
====

//üè∑{"id": "5e00eeef-1d5b-4a21-ac19-116ae376d999", "labels": ["niveau::interm√©diaire"]}
### Lutte contre les cybermenaces

[TIP]
====
Les cybermenaces incluent : malwares, phishing, attaques DOS/DDOS, exploitation de vuln√©rabilit√©s (connues ou zero-day), ing√©nierie sociale, escroqueries en ligne, fuites de donn√©es sensibles, etc.

Le cadre de r√©ponse aux menaces peut √™tre align√© sur le **NIST Cybersecurity Framework**, qui d√©finit 5 fonctions cl√©s :

1. **Identifier** : Comprendre et prioriser les risques.
2. **Prot√©ger** : Mettre en place des m√©canismes de d√©fense.
3. **D√©tecter** : Identifier une attaque en cours.
4. **R√©agir** : Contenir et neutraliser la menace.
5. **R√©cup√©rer** : Restaurer les services apr√®s une attaque.

//üè∑{"id": "d13f2885-ab5c-4543-9432-f53002c01c2c", "labels": []}
#### Solutions de pr√©vention

Ces solutions permettent d‚Äô**anticiper** les menaces avant qu'elles ne surviennent.

* **Formations et sensibilisations** des utilisateurs et des √©quipes IT.
* S‚Äôassurer que les d√©veloppeurs connaissent et appliquent les mesures de mitigation issues du **https://owasp.org/www-project-top-ten/[OWASP Top 10]**, les bonnes pratiques de s√©curit√© applicative (ex. : protection contre les injections, l‚Äôauthentification d√©faillante, les conceptions non s√©curis√©es et autres risques critiques).  

* **Syst√®mes de pr√©vention d'intrusion (IPS)** pour bloquer les acteurs jug√©s malicieux.
* **Revues d'autorisations r√©guli√®res** pour minimiser l'exposition.
* **Durcissement des r√®gles de s√©curit√©** :
  - Authentification √† facteurs multiples (MFA).
  - Rotation obligatoire des mots de passe.
  - Utilisation de **coffres-forts num√©riques** pour stocker les secrets.
* **Audits r√©guliers** (tests d'intrusion, audit de code) par des experts internes ou externes.
* **Solutions DLP (Data Loss Prevention)** pour surveiller et emp√™cher les fuites de donn√©es sensibles.
* **Blocage des vecteurs d'attaque** (ex. d√©sactivation des ports USB).
* **Mises √† jour automatiques des patches de s√©curit√©**.
====
====
Exemple 1 : Sensibilisation des utilisateurs via https://cyber.gouv.fr/bonnes-pratiques-protegez-vous[les recommandations de l'ANSSI].
====

====
Exemple 2 : Mise en place de l'IPS OpenSource **CrowdSec**, bas√© sur le partage d'information communautaire (*crowdsourcing*).
====

//üè∑{"id": "ac7dde83-27c9-4916-9020-73efaab5fcb1", "labels": []}
#### Solutions de d√©tection
[TIP]
====
Ces solutions permettent d‚Äô**identifier** les attaques en cours.

* **Antivirus nouvelle g√©n√©ration** (bas√©s sur IA et heuristiques, et non uniquement sur des signatures).
* **WAF (Web Application Firewall)** pour analyser et bloquer les attaques applicatives.
* **SIEM (Security Information and Event Management)** pour corr√©ler et analyser les journaux issus de multiples sources.
* **IDS (Intrusion Detection System)** pour surveiller le trafic r√©seau et d√©tecter les attaques.
* **SAST (Static Application Security Testing)** et **DAST (Dynamic Application Security Testing)** :
  - SAST : Analyse du **code source** pour identifier les vuln√©rabilit√©s connues.
  - DAST : Analyse des **comportements en ex√©cution**.
* **SCA (Software Composition Analysis)** : Analyse des d√©pendances logicielles pour d√©tecter les **CVE (Common Vulnerabilities and Exposures)**.
====
====
Exemple 1 : Int√©gration de **OWASP Dependency-Check** dans la CI/CD pour d√©tecter les librairies contenant des CVE.
====

//üè∑{"id": "d4498522-32aa-4987-aaec-2d9cf01130da", "labels": []}
#### Solutions de correction
[TIP]
====
Ces solutions permettent de **r√©agir** et **corriger** apr√®s la d√©tection d‚Äôune menace.

* **Solutions anti-malware** pour supprimer les logiciels malveillants.
* **Plans de restauration des sauvegardes** pour reprendre l‚Äôactivit√© rapidement (**MTTR** optimis√©).
* **Isolation des zones compromises** (micro-segmentation r√©seau, cloisonnement des applications).
* **Gestion de parc logiciel** pour **bloquer** les logiciels non autoris√©s.
* **Analyse forensique** pour comprendre les chemins d'attaque et identifier la source d‚Äôune compromission.
* **Proc√©dures de r√©ponse √† incident**, en se basant sur le standard **NIST SP 800-61**.
====
====
Exemple 1 : D√©ploiement d‚Äôun **plan de secours** bas√© sur les recommandations du https://www.cybermalveillance.gouv.fr/tous-nos-contenus/bonnes-pratiques/cyberattaque-que-faire-guide-dirigeants[NIST SP 800-61].
====

//üè∑{"id": "a69b42f5-4f4e-42bf-b4bc-c6093941600f", "labels": ["niveau::avanc√©"]}
#### Solutions de pr√©diction
[TIP]
====
Ces solutions r√©centes reposent sur **l‚Äôanalyse comportementale** et le **Machine Learning**.

* **UEBA (User and Entity Behavior Analytics)** : D√©tection des comportements anormaux d‚Äôutilisateurs ou de syst√®mes.
* **Simulations d'attaques complexes** pour tester la r√©silience du SI.
* **Threat Intelligence** : Int√©gration de flux de renseignement sur les menaces en temps r√©el.
====
====
Exemple 1 : Surveillance des comportements suspects via **AWS GuardDuty** sur une application cloud AWS.
====

====
Exemple 2 : Utilisation de **CrowdSec Threat Intelligence** pour anticiper les tendances d‚Äôattaques.
====

//üè∑{"id": "d4d0f075-dff9-4d81-aebc-bbd0cc45bb55", "labels": ["annexe"]}
## Annexes

//üè∑{"id": "b2f76b28-83da-478b-bc94-f1bc29dc6084", "labels": ["niveau::interm√©diaire", "niveau_detail::d√©taill√©"]}
### RACI & Gouvernance de la S√©curit√©

[TIP]
====
Ce RACI permet de d√©finir clairement les r√¥les et responsabilit√©s des √©quipes en mati√®re de **gestion de la s√©curit√© informatique**.

:r: pass:quotes[[.green]#R#]
:a: pass:quotes[[.red]#A#]
:c: pass:quotes[[.blue]#C#]
:i: pass:quotes[[.orange]#I#]
:na: pass:quotes[[.grey]#N/A#]
:et: pass:quotes[[.grey]#&amp;#]

* {r} : *Responsible* (ex√©cute l'action).
* {a} : *Accountable* (valide l'action et en est responsable devant l'organisation).
* {c} : *Consulted* (doit √™tre consult√© pour expertise).
* {i} : *Informed* (doit √™tre inform√© apr√®s r√©alisation).

Dans un bon RACI, il ne doit **jamais** y avoir plus d'un {a} pour chaque ligne.

Exemple: 

.Gestion des services Cloud AWS
[cols="6,^1,^1,^1"]
|===
||√âquipe Syst√®mes & Cloud|√âquipe S√©curit√© SI|√âquipe R√©seau

.^|Cr√©ation des comptes AWS
.^|{r} {et} {a}
.^|{c} {et} {i}
.^|{i}

.^|Cr√©ation des strat√©gies IAM & SCP AWS
.^|{r}
.^|{a}
.^|{c}

.^|Gestion des logs CloudTrail et alertes CloudWatch
.^|{r}
.^|{a}
.^|{i}
|===

.Gestion des comptes applicatifs & IAM
[cols="6,^1,^1,^1"]
|===
||√âquipe annuaire|√âquipe projet|√âquipe SOC

.^|Cr√©ation des comptes SSO
.^|{r} {et} {a}
.^|{i}
.^|{i}

.^|Gestion des acc√®s
.^|{i}
.^|{r} {et} {a}
.^|{c}

.^|Revue annuelle des acc√®s
.^|{c} {et} {i}
.^|{i}
.^|{r} {et} {a}

|===

====

[PRE-FILLED]
====
Ce RACI permet de d√©finir clairement les r√¥les et responsabilit√©s des √©quipes en mati√®re de **gestion de la s√©curit√© informatique**.

:r: pass:quotes[[.green]#R#]
:a: pass:quotes[[.red]#A#]
:c: pass:quotes[[.blue]#C#]
:i: pass:quotes[[.orange]#I#]
:na: pass:quotes[[.grey]#N/A#]
:et: pass:quotes[[.grey]#&amp;#]

* {r} : *Responsible* (ex√©cute l'action).
* {a} : *Accountable* (valide l'action et en est responsable devant l'organisation).
* {c} : *Consulted* (doit √™tre consult√© pour expertise).
* {i} : *Informed* (doit √™tre inform√© apr√®s r√©alisation).
====

//üè∑{"id": "7d8dff71-3acd-450b-bc68-d2e2efee2fbb", "labels": ["niveau::interm√©diaire","niveau_detail::d√©taill√©"]}
### Auto-contr√¥les de s√©curit√©

//üè∑{"id": "68556bb6-b10d-4fe3-b956-ae9c5f926f4a", "labels": []}
#### Auto-contr√¥le des vuln√©rabilit√©s

[TIP]
====
La gestion des vuln√©rabilit√©s suit les standards **OWASP Top 10**, **MITRE ATT&CK** et **NIST 800-53**.

Objectif : V√©rifier que les mesures de **protection, d√©tection et correction** sont bien appliqu√©es pour r√©duire les risques d'attaques (ex: ransomware, attaques supply-chain, injections...).

Exemple : 

[cols="e,e,3e"]
|===
|Vuln√©rabilit√© |Prise en compte ? |Mesures techniques entreprises

|Exposition de ports inutiles
|‚úÖ
|Configuration du firewall **iptables/nftables**. Seuls les ports 443 et 22 sont ouverts.

|Brute-force SSH
|‚úÖ
|Utilisation de **Fail2Ban** + authentification SSH par cl√© publique.

|Contournement des contr√¥les d‚Äôacc√®s
|‚úÖ
|Utilisation de **Spring Security**, **OAuth2** et **RBAC**.

|Injection SQL / NoSQL
|‚úÖ
|Utilisation **exclusivement** de **Prepared Statements** et ORM s√©curis√©s.

|XSS (Cross-Site Scripting)
|‚úÖ
a|
* √âchappement syst√©matique des entr√©es utilisateur avec **OWASP Java Encoder**.
* **CSP (Content-Security-Policy)** activ√© pour limiter l'ex√©cution de scripts non autoris√©s.

|Fuite de secrets et API Keys
|‚úÖ
|Utilisation de **Vault** pour stocker les secrets.

|Attaques HTTPS (CRIME, BREACH, DROWN)
|‚úÖ
a|
* **D√©sactivation SSLv2 / SSLv3**
* Activation **HSTS (HTTP Strict Transport Security)**

|CSRF (Cross-Site Request Forgery)
|‚úÖ
|Utilisation du **double submit cookie pattern** et validation des tokens CSRF.

|Planification des mises √† jour de s√©curit√©
|‚úÖ
a|
* Mises √† jour **Debian/Ubuntu** via **unattended-upgrades** chaque semaine.
* Mises √† jour **PostgreSQL** appliqu√©es dans un d√©lai de **7 jours** apr√®s publication d'un CVE.
|===

====

[PRE-FILLED]
====

[cols="1,1,3"]
|===
|Vuln√©rabilit√© |Prise en compte ? |Mesures techniques entreprises

| 
| ‚úÖ
| 
|===
====

//üè∑{"id": "f40cd11b-8d1f-4223-944d-3cad1a1a9f15", "labels": ["juridique"]}
#### Auto-contr√¥le RGPD

[TIP]
====
Le RGPD impose des exigences fortes sur les donn√©es personnelles des individus. Ces points sont bas√©s sur les recommandations de la **CNIL** et de l'**EDPB**.

A noter que le RGPD **ne concerne que les personnes physiques**, pas les entreprises.

Exemple :

[cols="e,e,e"]
|===
|Exigence RGPD |Prise en compte ? |Mesures techniques entreprises

|Registre des traitements
|‚úÖ
|Documentation compl√®te dans **Confluence / Notion**.

|Minimisation des donn√©es collect√©es
|‚úÖ
|Suppression des **num√©ros de CB stock√©s inutilement**.

|Droits des utilisateurs (acc√®s, rectification, suppression)
|‚úÖ
|Un formulaire d√©di√© permet d'effectuer les demandes de droit **via un workflow automatis√©**.

|Protection des donn√©es sensibles
|‚úÖ
a|
* Chiffrement des backups en **AES-256**.
* Stockage des mots de passe en **bcrypt**.
|===
====

[PRE-FILLED]
====
[cols="1,1,1"]
|===
|Exigence RGPD |Prise en compte ? |Mesures techniques entreprises

| 
| ‚úÖ
| 
|===

====